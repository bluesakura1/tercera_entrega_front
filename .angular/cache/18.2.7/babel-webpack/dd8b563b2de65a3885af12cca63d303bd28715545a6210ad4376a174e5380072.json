{"ast":null,"code":"import { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/supabase/message.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = (a0, a1) => ({\n  \"message-sent\": a0,\n  \"message-received\": a1\n});\nfunction MessageComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function MessageComponent_div_5_Template_div_click_0_listener() {\n      const contact_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.selectContact(contact_r2));\n    });\n    i0.ɵɵelement(1, \"img\", 16);\n    i0.ɵɵelementStart(2, \"div\", 17)(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const contact_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", contact_r2.avatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(contact_r2.name);\n  }\n}\nfunction MessageComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Chat con \", ctx_r2.selectedContact.name, \"\");\n  }\n}\nfunction MessageComponent_div_14_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"small\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(message_r4.message);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(message_r4.senderUserUserId == ctx_r2.actualuser.user_id ? \"yo\" : \"el otro\");\n  }\n}\nfunction MessageComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, MessageComponent_div_14_div_1_div_1_Template, 5, 2, \"div\", 22);\n    i0.ɵɵelementStart(2, \"div\", 23)(3, \"small\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const message_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(6, _c0, message_r4.senderUserUserId === ctx_r2.senderUser, message_r4.senderUserUserId !== ctx_r2.senderUser));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r4.receiverUserUserId == ctx_r2.selectedContact.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 3, message_r4.created_at, \"short\"));\n  }\n}\nfunction MessageComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtemplate(1, MessageComponent_div_14_div_1_Template, 6, 9, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.messages);\n  }\n}\nfunction MessageComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"p\");\n    i0.ɵɵtext(2, \"No tienes mensajes con este propietario.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction MessageComponent_textarea_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"textarea\", 26);\n  }\n}\nexport let MessageComponent = /*#__PURE__*/(() => {\n  class MessageComponent {\n    fb;\n    messageService;\n    route;\n    actualuser = JSON.parse(localStorage.getItem('user'));\n    messageForm;\n    messages = [];\n    contacts = [{\n      id: 1,\n      name: 'Juan Pérez',\n      avatar: 'https://randomuser.me/api/portraits/men/1.jpg'\n    }\n    // Añadir más contactos aquí\n    ];\n    selectedContact = null;\n    senderUser = 123;\n    constructor(fb, messageService, route) {\n      this.fb = fb;\n      this.messageService = messageService;\n      this.route = route;\n      this.messageForm = this.fb.group({\n        message: ['', Validators.required]\n      });\n    }\n    ngOnInit() {\n      this.loadMessages();\n      this.route.queryParams.subscribe(params => {\n        const userId = params['id'];\n        if (userId) {\n          this.senderUser = parseInt(userId, 10);\n        }\n      });\n    }\n    // Seleccionar un contacto para el chat\n    apendcontacts() {\n      this.loadMessages();\n      console.log(this.messages, \"\");\n      this.messages.map(message => {\n        if (this.contacts.some(obj => obj.id == message.receiverUserUserId)) {} else {\n          this.contacts.push({\n            name: \"propietario\",\n            id: message.receiverUserUserId,\n            avatar: \"https://randomuser.me/api/portraits/men/\" + Math.floor(Math.random() * 20) + \".jpg\"\n          });\n        }\n        console.log(message, \"mensaje de\");\n      });\n      console.log(this.contacts, \"frs   \");\n    }\n    // Seleccionar un contacto para el chat\n    selectContact(contact) {\n      this.selectedContact = contact;\n    }\n    // Cargar los mensajes del historial de acuerdo al contacto seleccionado\n    loadMessages() {\n      const user = JSON.parse(localStorage.getItem('user'));\n      this.messageService.getMessageHistory(user.user_id).subscribe(messages => {\n        this.messages = messages;\n        console.log('Historial de mensajes:', messages);\n      }, error => {\n        console.error('Error al cargar historial de mensajes:', error);\n      });\n    }\n    onSubdmit() {\n      this.apendcontacts();\n      console.log(this.contacts);\n    }\n    // Enviar mensaje al backend\n    onSubmit() {\n      const user = JSON.parse(localStorage.getItem('user'));\n      if (this.messageForm.valid && this.selectedContact) {\n        const messageData = {\n          ...this.messageForm.value,\n          sender_user_id: user.user_id,\n          receiver_user_id: this.selectedContact.id\n        };\n        this.messageService.sendMessage(messageData).subscribe(response => {\n          console.log('Mensaje enviado:', response);\n          this.messageForm.reset();\n          this.loadMessages();\n        }, error => {\n          console.error('Error al enviar mensaje:', error);\n        });\n      }\n    }\n    static ɵfac = function MessageComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MessageComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MessageComponent,\n      selectors: [[\"app-message\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 22,\n      vars: 7,\n      consts: [[1, \"main-container\"], [1, \"chat-container\"], [1, \"contact-list\"], [\"class\", \"contact-item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"chat-area\"], [\"class\", \"chat-header\", 4, \"ngIf\"], [1, \"regresar\"], [\"routerLink\", \"/home\"], [3, \"click\"], [\"class\", \"message-history\", 4, \"ngIf\"], [\"class\", \"no-messages\", 4, \"ngIf\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"id\", \"message\", \"formControlName\", \"message\", \"class\", \"form-control\", \"rows\", \"4\", \"placeholder\", \"Escribe tu mensaje aqu\\u00ED...\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"contact-item\", 3, \"click\"], [\"alt\", \"avatar\", 1, \"contact-avatar\", 3, \"src\"], [1, \"contact-info\"], [1, \"chat-header\"], [1, \"message-history\"], [\"class\", \"message-body\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"message-body\", 3, \"ngClass\"], [\"class\", \"message-item\", 4, \"ngIf\"], [1, \"message-footer\"], [1, \"message-item\"], [1, \"no-messages\"], [\"id\", \"message\", \"formControlName\", \"message\", \"rows\", \"4\", \"placeholder\", \"Escribe tu mensaje aqu\\u00ED...\", 1, \"form-control\"]],\n      template: function MessageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"main\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h3\");\n          i0.ɵɵtext(4, \"Propietarios\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, MessageComponent_div_5_Template, 5, 2, \"div\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 4);\n          i0.ɵɵtemplate(7, MessageComponent_div_7_Template, 3, 1, \"div\", 5);\n          i0.ɵɵelementStart(8, \"div\", 6)(9, \"p\")(10, \"a\", 7);\n          i0.ɵɵtext(11, \"Regresar\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(12, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function MessageComponent_Template_button_click_12_listener() {\n            return ctx.onSubdmit();\n          });\n          i0.ɵɵtext(13, \"Refrescar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(14, MessageComponent_div_14_Template, 2, 1, \"div\", 9)(15, MessageComponent_div_15_Template, 3, 0, \"div\", 10);\n          i0.ɵɵelementStart(16, \"form\", 11);\n          i0.ɵɵlistener(\"ngSubmit\", function MessageComponent_Template_form_ngSubmit_16_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(17, \"div\", 12);\n          i0.ɵɵtemplate(18, MessageComponent_textarea_18_Template, 1, 0, \"textarea\", 13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"button\", 14);\n          i0.ɵɵtext(20, \" Enviar mensaje \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(21, \"br\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.contacts);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedContact);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.messages.length > 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.messages.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.messageForm);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedContact);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", !ctx.messageForm.valid || !ctx.selectedContact);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, CommonModule, i4.NgClass, i4.NgForOf, i4.NgIf, i4.DatePipe, RouterLink],\n      styles: [\"\\n\\nbody[_ngcontent-%COMP%], html[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n  width: 100%;\\n  height: 100%;\\n  font-family: Arial, sans-serif;\\n}\\n\\nmain.main-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  background-image: url('https://jzoykxtgshtojpikzhhd.supabase.co/storage/v1/object/public/homes/fondo.jpeg');\\n  background-size: cover;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n\\n\\n.message-container[_ngcontent-%COMP%] {\\n  max-width: 800px;\\n  width: 90%;\\n  padding: 20px;\\n  background-color: rgba(0, 0, 0, 0.7); \\n  border-radius: 8px;\\n  color: #ffffff;\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\\n  max-height: 90%; \\n}\\n\\n\\n\\n.message-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 24px;\\n  margin-bottom: 20px;\\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\\n}\\n\\n\\n\\n.form-group[_ngcontent-%COMP%] {\\n  margin-bottom: 15px;\\n}\\n\\nlabel[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\ntextarea.form-control[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  border: none;\\n  border-radius: 4px;\\n  resize: vertical;\\n  font-size: 14px;\\n  background-color: rgba(255, 255, 255, 0.9);\\n  color: #333;\\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\\n}\\n\\ntextarea.form-control[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  border: 1px solid #007bff;\\n}\\n\\n\\n\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  border: none;\\n  border-radius: 4px;\\n  background-color: #007bff;\\n  color: white;\\n  font-size: 16px;\\n  cursor: pointer;\\n  transition: background-color 0.3s ease;\\n}\\n\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%]:hover {\\n  background-color: #0056b3;\\n}\\n\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%]:disabled {\\n  background-color: #ccc;\\n  cursor: not-allowed;\\n}\\n\\n\\n\\n.message-history[_ngcontent-%COMP%] {\\n  margin-top: 20px;\\n}\\n\\n.message-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  margin-bottom: 10px;\\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\\n}\\n\\n.message-item[_ngcontent-%COMP%] {\\n  background-color: rgba(0, 0, 0, 0.6);\\n  padding: 15px;\\n  border-radius: 8px;\\n  margin-bottom: 10px;\\n}\\n\\n.message-header[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  color: #cccccc;\\n}\\n\\n.message-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  margin-top: 10px;\\n}\\n\\n.message-footer[_ngcontent-%COMP%] {\\n  text-align: right;\\n  font-size: 12px;\\n  color: #bbbbbb;\\n}\\n\\n\\n\\n.no-messages[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 18px;\\n  margin-top: 20px;\\n  color: #ffffff;\\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\\n}\\n.regresar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  padding: 10px 20px;\\n  background-color: #007bff;\\n  color: white; \\n  font-size: 16px;\\n  text-decoration: none; \\n  border-radius: 5px; \\n  font-weight: bold;\\n  text-align: center;\\n  cursor: pointer;\\n  transition: background-color 0.3s, transform 0.2s;\\n}\\n\\n\\n\\n.regresar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  background-color: #0056b3;\\n  transform: scale(1.05); \\n}\\n\\n\\n\\n.regresar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  box-shadow: 0 0 0 2px #ffcc00; \\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvcGFnZXMvbWVzc2FnZXMvbWVzc2FnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUEyQztBQUMzQztFQUNFLFNBQVM7RUFDVCxVQUFVO0VBQ1YsV0FBVztFQUNYLFlBQVk7RUFDWiw4QkFBOEI7QUFDaEM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLDJHQUEyRztFQUMzRyxzQkFBc0I7RUFDdEIsMkJBQTJCO0VBQzNCLDRCQUE0QjtFQUM1QixhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtBQUNyQjs7QUFFQSwyQkFBMkI7QUFDM0I7RUFDRSxnQkFBZ0I7RUFDaEIsVUFBVTtFQUNWLGFBQWE7RUFDYixvQ0FBb0M7RUFDcEMsa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCx3Q0FBd0M7RUFDeEMsZUFBZTtBQUNqQjs7QUFFQSxxQkFBcUI7QUFDckI7RUFDRSxrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQiwyQ0FBMkM7QUFDN0M7O0FBRUEsZUFBZTtBQUNmO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsV0FBVztFQUNYLGFBQWE7RUFDYixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsMENBQTBDO0VBQzFDLFdBQVc7RUFDWCw4Q0FBOEM7QUFDaEQ7O0FBRUE7RUFDRSxhQUFhO0VBQ2IseUJBQXlCO0FBQzNCOztBQUVBLFVBQVU7QUFDVjtFQUNFLFdBQVc7RUFDWCxhQUFhO0VBQ2IsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQix5QkFBeUI7RUFDekIsWUFBWTtFQUNaLGVBQWU7RUFDZixlQUFlO0VBQ2Ysc0NBQXNDO0FBQ3hDOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLG1CQUFtQjtBQUNyQjs7QUFFQSxjQUFjO0FBQ2Q7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsbUJBQW1CO0VBQ25CLDJDQUEyQztBQUM3Qzs7QUFFQTtFQUNFLG9DQUFvQztFQUNwQyxhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixlQUFlO0VBQ2YsY0FBYztBQUNoQjs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRSxrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2QsMkNBQTJDO0FBQzdDO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osZUFBZTtFQUNmLHFCQUFxQjtFQUNyQixrQkFBa0I7RUFDbEIsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsaURBQWlEO0FBQ25EOztBQUVBLGlCQUFpQjtBQUNqQjtFQUNFLHlCQUF5QjtFQUN6QixzQkFBc0I7QUFDeEI7O0FBRUEsaURBQWlEO0FBQ2pEO0VBQ0UsYUFBYTtFQUNiLDZCQUE2QjtBQUMvQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIENvbmZpZ3VyYWNpw4PCs24gZGVsIGNvbnRlbmVkb3IgcHJpbmNpcGFsICovXHJcbmJvZHksIGh0bWwge1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XHJcbn1cclxuXHJcbm1haW4ubWFpbi1jb250YWluZXIge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2h0dHBzOi8vanpveWt4dGdzaHRvanBpa3poaGQuc3VwYWJhc2UuY28vc3RvcmFnZS92MS9vYmplY3QvcHVibGljL2hvbWVzL2ZvbmRvLmpwZWcnKTtcclxuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xyXG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLyogQ29udGVuZWRvciBkZSBtZW5zYWplcyAqL1xyXG4ubWVzc2FnZS1jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogODAwcHg7XHJcbiAgd2lkdGg6IDkwJTtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTsgXHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGNvbG9yOiAjZmZmZmZmO1xyXG4gIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbiAgbWF4LWhlaWdodDogOTAlOyBcclxufVxyXG5cclxuLyogVMODwq10dWxvIHByaW5jaXBhbCAqL1xyXG4ubWVzc2FnZS1jb250YWluZXIgaDIge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICB0ZXh0LXNoYWRvdzogMXB4IDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjUpO1xyXG59XHJcblxyXG4vKiBGb3JtdWxhcmlvICovXHJcbi5mb3JtLWdyb3VwIHtcclxuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG5sYWJlbCB7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbnRleHRhcmVhLmZvcm0tY29udHJvbCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIHJlc2l6ZTogdmVydGljYWw7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTtcclxuICBjb2xvcjogIzMzMztcclxuICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG59XHJcblxyXG50ZXh0YXJlYS5mb3JtLWNvbnRyb2w6Zm9jdXMge1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgIzAwN2JmZjtcclxufVxyXG5cclxuLyogQm90w4PCs24gKi9cclxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlO1xyXG59XHJcblxyXG5idXR0b25bdHlwZT1cInN1Ym1pdFwiXTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNTZiMztcclxufVxyXG5cclxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl06ZGlzYWJsZWQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNjY2M7XHJcbiAgY3Vyc29yOiBub3QtYWxsb3dlZDtcclxufVxyXG5cclxuLyogSGlzdG9yaWFsICovXHJcbi5tZXNzYWdlLWhpc3Rvcnkge1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbn1cclxuXHJcbi5tZXNzYWdlLWhpc3RvcnkgaDMge1xyXG4gIGZvbnQtc2l6ZTogMjBweDtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gIHRleHQtc2hhZG93OiAxcHggMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuNSk7XHJcbn1cclxuXHJcbi5tZXNzYWdlLWl0ZW0ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTtcclxuICBwYWRkaW5nOiAxNXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcblxyXG4ubWVzc2FnZS1oZWFkZXIge1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBjb2xvcjogI2NjY2NjYztcclxufVxyXG5cclxuLm1lc3NhZ2UtYm9keSBwIHtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG5cclxuLm1lc3NhZ2UtZm9vdGVyIHtcclxuICB0ZXh0LWFsaWduOiByaWdodDtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgY29sb3I6ICNiYmJiYmI7XHJcbn1cclxuXHJcbi8qIE1lbnNhamUgdmFjw4PCrW8gKi9cclxuLm5vLW1lc3NhZ2VzIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgdGV4dC1zaGFkb3c6IDFweCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC41KTtcclxufVxyXG4ucmVncmVzYXIgYSB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xyXG4gIGNvbG9yOiB3aGl0ZTsgXHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTsgXHJcbiAgYm9yZGVyLXJhZGl1czogNXB4OyBcclxuICBmb250LXdlaWdodDogYm9sZDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcywgdHJhbnNmb3JtIDAuMnM7XHJcbn1cclxuXHJcbi8qIEVmZWN0byBob3ZlciAqL1xyXG4ucmVncmVzYXIgYTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNTZiMztcclxuICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOyBcclxufVxyXG5cclxuLyogRWZlY3RvIGRlIGVuZm9xdWUgKGZvY3VzKSBwYXJhIGFjY2VzaWJpbGlkYWQgKi9cclxuLnJlZ3Jlc2FyIGE6Zm9jdXMge1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgYm94LXNoYWRvdzogMCAwIDAgMnB4ICNmZmNjMDA7IFxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n  return MessageComponent;\n})();","map":{"version":3,"names":["ReactiveFormsModule","Validators","CommonModule","RouterLink","i0","ɵɵelementStart","ɵɵlistener","MessageComponent_div_5_Template_div_click_0_listener","contact_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","selectContact","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","avatar","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","ɵɵtextInterpolate1","selectedContact","message_r4","message","senderUserUserId","actualuser","user_id","ɵɵtemplate","MessageComponent_div_14_div_1_div_1_Template","ɵɵpureFunction2","_c0","senderUser","receiverUserUserId","id","ɵɵpipeBind2","created_at","MessageComponent_div_14_div_1_Template","messages","MessageComponent","fb","messageService","route","JSON","parse","localStorage","getItem","messageForm","contacts","constructor","group","required","ngOnInit","loadMessages","queryParams","subscribe","params","userId","parseInt","apendcontacts","console","log","map","some","obj","push","Math","floor","random","contact","user","getMessageHistory","error","onSubdmit","onSubmit","valid","messageData","value","sender_user_id","receiver_user_id","sendMessage","response","reset","ɵɵdirectiveInject","i1","FormBuilder","i2","MessageService","i3","ActivatedRoute","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","MessageComponent_Template","rf","ctx","MessageComponent_div_5_Template","MessageComponent_div_7_Template","MessageComponent_Template_button_click_12_listener","MessageComponent_div_14_Template","MessageComponent_div_15_Template","MessageComponent_Template_form_ngSubmit_16_listener","MessageComponent_textarea_18_Template","length","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","NgClass","NgForOf","NgIf","DatePipe","styles"],"sources":["C:\\Users\\Nereida Ramos\\Downloads\\tercera_entrega_front\\src\\app\\features\\pages\\messages\\message.component.ts","C:\\Users\\Nereida Ramos\\Downloads\\tercera_entrega_front\\src\\app\\features\\pages\\messages\\message.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { MessageService, Message } from '../../../services/supabase/message.service';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterLink } from '@angular/router';\r\nimport { ActivatedRoute } from '@angular/router';\r\ninterface user {\r\n  isActive: boolean;\r\n  user_id: number;\r\n  email: string;  \r\n  profile_picture: string;  \r\n  is_owner: boolean;  \r\n  bio: string;  \r\n  created_at: string;  \r\n  updated_at: string;  \r\n  deleted_at: string;  \r\n}\r\n@Component({\r\n  selector: 'app-message',\r\n  standalone: true,\r\n  imports: [ReactiveFormsModule, CommonModule, RouterLink],\r\n  templateUrl: './message.component.html',\r\n  styleUrls: ['./message.component.css']\r\n})\r\nexport class MessageComponent implements OnInit {\r\n  actualuser:user|null = JSON.parse(localStorage.getItem('user')!);\r\n\r\n  messageForm: FormGroup;\r\n  messages: Message[] = []; \r\n  contacts = [\r\n    { id: 1, name: 'Juan Pérez', avatar: 'https://randomuser.me/api/portraits/men/1.jpg'},\r\n    // Añadir más contactos aquí\r\n  ];\r\n  selectedContact: any = null;\r\n  senderUser: number = 123; \r\n\r\n  constructor(private fb: FormBuilder, private messageService: MessageService, private route: ActivatedRoute) {\r\n    this.messageForm = this.fb.group({\r\n      message: ['', Validators.required] \r\n    });\r\n  }\r\n\r\n  \r\n  ngOnInit(): void {\r\n    this.loadMessages();\r\n    this.route.queryParams.subscribe((params) => {\r\n      const userId = params['id'];\r\n      if (userId) {\r\n        this.senderUser = parseInt(userId, 10); \r\n      }\r\n    });\r\n  }\r\n  // Seleccionar un contacto para el chat\r\n  apendcontacts(): void {\r\n    this.loadMessages();\r\n    console.log(this.messages,\"\");\r\n    \r\n    this.messages.map((message:Message) => {\r\n\r\n      if (this.contacts.some(obj => obj.id == message.receiverUserUserId)) {\r\n        \r\n      }else{\r\n        this.contacts.push({name:\"propietario\",id:message.receiverUserUserId,avatar:\"https://randomuser.me/api/portraits/men/\"+Math.floor(Math.random() * 20)+\".jpg\"});\r\n      }\r\n      console.log(message,\"mensaje de\");}\r\n      \r\n  );\r\n  console.log(this.contacts,\"frs   \");\r\n  }\r\n  // Seleccionar un contacto para el chat\r\n  selectContact(contact: any): void {\r\n    this.selectedContact = contact;\r\n  }\r\n\r\n  // Cargar los mensajes del historial de acuerdo al contacto seleccionado\r\n  loadMessages(): void {\r\n    const user:user|null = JSON.parse(localStorage.getItem('user')!);\r\n\r\n    this.messageService.getMessageHistory(user!.user_id).subscribe(\r\n      (messages) => {\r\n        this.messages = messages;\r\n        console.log('Historial de mensajes:', messages);\r\n      },\r\n      (error) => {\r\n        console.error('Error al cargar historial de mensajes:', error);\r\n      }\r\n    );\r\n  }\r\n  onSubdmit(): void {\r\n    this.apendcontacts();\r\n    console.log(this.contacts);\r\n  }\r\n  // Enviar mensaje al backend\r\n  onSubmit(): void {\r\n    const user:user|null = JSON.parse(localStorage.getItem('user')!);\r\n    if (this.messageForm.valid && this.selectedContact) {\r\n      const messageData: Message = {\r\n        ...this.messageForm.value,\r\n        sender_user_id: user!.user_id, \r\n        receiver_user_id: this.selectedContact.id,\r\n      };\r\n\r\n      this.messageService.sendMessage(messageData).subscribe(\r\n        (response) => {\r\n          console.log('Mensaje enviado:', response);\r\n          this.messageForm.reset();\r\n          this.loadMessages(); \r\n        },\r\n        (error) => {\r\n          console.error('Error al enviar mensaje:', error);\r\n        }\r\n      );\r\n    }\r\n  }\r\n}\r\n","<main class=\"main-container\">\r\n  <div class=\"chat-container\">\r\n    \r\n    <div class=\"contact-list\">\r\n      <h3>Propietarios</h3>\r\n      <div *ngFor=\"let contact of contacts\" class=\"contact-item\" (click)=\"selectContact(contact)\">\r\n        <img [src]=\"contact.avatar\" alt=\"avatar\" class=\"contact-avatar\">\r\n        <div class=\"contact-info\">\r\n          <strong>{{ contact.name }}</strong>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    \r\n    <div class=\"chat-area\">\r\n      <div *ngIf=\"selectedContact\" class=\"chat-header\">\r\n        <h3>Chat con {{ selectedContact.name }}</h3>\r\n      </div>\r\n      <div class=\"regresar\">\r\n        <p><a routerLink=\"/home\">Regresar</a></p>\r\n      </div>\r\n      <button (click)=\"onSubdmit()\">Refrescar</button>\r\n    \r\n      <div *ngIf=\"messages.length > 0\" class=\"message-history\">\r\n        <div class=\"message-body\" *ngFor=\"let message of messages\"  [ngClass]=\"{ 'message-sent': message.senderUserUserId === senderUser, 'message-received': message.senderUserUserId !== senderUser }\">\r\n          <div class=\"message-item\" *ngIf=\"message.receiverUserUserId == selectedContact.id\"  >\r\n            <p>{{ message.message }}</p>\r\n            <small>{{  message.senderUserUserId == this.actualuser!.user_id? \"yo\":\"el otro\" }}</small>\r\n          </div>\r\n          <div class=\"message-footer\">\r\n            <small>{{ message.created_at | date: 'short' }}</small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    \r\n      <div *ngIf=\"messages.length === 0\" class=\"no-messages\">\r\n        <p>No tienes mensajes con este propietario.</p>\r\n      </div>\r\n\r\n      \r\n      <form [formGroup]=\"messageForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"form-group\">\r\n          <textarea\r\n            id=\"message\"\r\n            formControlName=\"message\"\r\n            class=\"form-control\"\r\n            rows=\"4\"\r\n            placeholder=\"Escribe tu mensaje aquí...\"\r\n            *ngIf=\"selectedContact\"\r\n          ></textarea>\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"!messageForm.valid || !selectedContact\">\r\n          Enviar mensaje\r\n        </button>\r\n      </form>\r\n    </div>\r\n\r\n    <br/>\r\n  </div>\r\n\r\n</main>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}