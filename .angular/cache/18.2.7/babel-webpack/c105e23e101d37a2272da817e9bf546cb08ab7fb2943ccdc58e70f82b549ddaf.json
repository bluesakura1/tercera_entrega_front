{"ast":null,"code":"import Swal from 'sweetalert2';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/supabase/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nexport let PerfilComponent = /*#__PURE__*/(() => {\n  class PerfilComponent {\n    userService;\n    router;\n    profile = {\n      fullName: '',\n      email: '',\n      userName: '',\n      password: '',\n      bio: '',\n      profilePicture: ''\n    };\n    constructor(userService, router) {\n      this.userService = userService;\n      this.router = router;\n    }\n    ngOnInit() {\n      const userName = localStorage.getItem('currentUser');\n      if (userName) {\n        this.userService.getProfile(userName).subscribe({\n          next: userProfile => {\n            if (userProfile) {\n              this.profile = userProfile;\n            } else {\n              this.router.navigate(['/login']);\n            }\n          },\n          error: err => {\n            console.error('Error al obtener el perfil', err);\n            this.router.navigate(['/login']);\n          }\n        });\n      } else {\n        this.router.navigate(['/login']);\n      }\n    }\n    onFileSelected(event) {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          this.profile.profilePicture = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    }\n    updateProfile() {\n      const {\n        fullName,\n        email,\n        password,\n        userName,\n        bio,\n        profilePicture\n      } = this.profile;\n      if (!fullName || !email || !password || !userName) {\n        Swal.fire({\n          title: 'Error',\n          text: 'Debe completar todos los campos',\n          icon: 'error'\n        });\n        return;\n      }\n      this.userService.updateProfile(userName, {\n        fullName,\n        email,\n        password,\n        userName,\n        bio,\n        profilePicture\n      }).subscribe({\n        next: response => {\n          if (response.success) {\n            localStorage.setItem(userName.toLowerCase().trim(), JSON.stringify(this.profile));\n            localStorage.setItem('currentUser', userName.toLowerCase().trim());\n            Swal.fire({\n              title: 'Éxito',\n              text: 'Perfil actualizado correctamente',\n              icon: 'success'\n            });\n          } else {\n            Swal.fire({\n              title: 'Error',\n              text: response.message,\n              icon: 'error'\n            });\n          }\n        },\n        error: err => {\n          Swal.fire({\n            title: 'Error',\n            text: 'No se pudo actualizar el perfil',\n            icon: 'error'\n          });\n        }\n      });\n    }\n    logout() {\n      localStorage.removeItem('currentUser');\n      this.router.navigate(['/login']);\n    }\n    static ɵfac = function PerfilComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PerfilComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PerfilComponent,\n      selectors: [[\"app-perfil\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 23,\n      vars: 4,\n      consts: [[1, \"perfil-container\"], [\"id\", \"perfilForm\", 3, \"ngSubmit\"], [\"for\", \"nombreCompleto\"], [\"type\", \"text\", \"id\", \"nombreCompleto\", \"name\", \"nombreCompleto\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"userName\"], [\"type\", \"text\", \"id\", \"userName\", \"name\", \"userName\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"bio\"], [\"id\", \"bio\", \"name\", \"bio\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"profilePicture\"], [\"type\", \"file\", \"id\", \"profilePicture\", \"name\", \"profilePicture\", 3, \"change\"], [\"type\", \"submit\"], [\"id\", \"logoutBtn\", 3, \"click\"]],\n      template: function PerfilComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n          i0.ɵɵtext(2, \"Perfil de Usuario\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 1);\n          i0.ɵɵlistener(\"ngSubmit\", function PerfilComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.updateProfile();\n          });\n          i0.ɵɵelementStart(4, \"label\", 2);\n          i0.ɵɵtext(5, \"Nombre Completo:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"input\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function PerfilComponent_Template_input_ngModelChange_6_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.profile.fullName, $event) || (ctx.profile.fullName = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"label\", 4);\n          i0.ɵɵtext(8, \"Correo Electr\\u00F3nico:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"input\", 5);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function PerfilComponent_Template_input_ngModelChange_9_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.profile.email, $event) || (ctx.profile.email = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"label\", 6);\n          i0.ɵɵtext(11, \"Nombre de Usuario:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"input\", 7);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function PerfilComponent_Template_input_ngModelChange_12_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.profile.userName, $event) || (ctx.profile.userName = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"label\", 8);\n          i0.ɵɵtext(14, \"Biograf\\u00EDa:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"textarea\", 9);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function PerfilComponent_Template_textarea_ngModelChange_15_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.profile.bio, $event) || (ctx.profile.bio = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"label\", 10);\n          i0.ɵɵtext(17, \"Foto de Perfil:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"input\", 11);\n          i0.ɵɵlistener(\"change\", function PerfilComponent_Template_input_change_18_listener($event) {\n            return ctx.onFileSelected($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"button\", 12);\n          i0.ɵɵtext(20, \"Actualizar Perfil\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(21, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function PerfilComponent_Template_button_click_21_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵtext(22, \"Cerrar Sesi\\u00F3n\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.profile.fullName);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.profile.email);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.profile.userName);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.profile.bio);\n        }\n      },\n      dependencies: [FormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, CommonModule, HttpClientModule],\n      styles: [\"main[_ngcontent-%COMP%] {\\n  background-image: url('https://jzoykxtgshtojpikzhhd.supabase.co/storage/v1/object/public/homes/fondo.jpeg');\\n  background-position: center;\\n  display: flex;\\n}\\n.perfil-container[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  margin: auto;\\n  padding: 20px;\\n  background-color: #f9f9f9;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\\n}\\n.perfil-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 2rem;\\n  color: #333;\\n  margin-bottom: 20px;\\n}\\nform[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 15px;\\n}\\nlabel[_ngcontent-%COMP%] {\\n  font-size: 1rem;\\n  color: #555;\\n}\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%], \\ninput[type=\\\"email\\\"][_ngcontent-%COMP%], \\ntextarea[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  font-size: 1rem;\\n  border: 1px solid #ccc;\\n  border-radius: 5px;\\n  margin-top: 5px;\\n}\\ntextarea[_ngcontent-%COMP%] {\\n  resize: vertical;\\n  height: 100px;\\n}\\ninput[type=\\\"file\\\"][_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\nbutton[_ngcontent-%COMP%] {\\n  background-color: #4e9952;\\n  color: white;\\n  border: none;\\n  padding: 10px 20px;\\n  font-size: 1rem;\\n  cursor: pointer;\\n  border-radius: 5px;\\n  transition: background-color 0.3s;\\n  align-self: center;\\n}\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: #3b7e3a;\\n}\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\n  background-color: #c9167e;\\n  margin-top: 20px;\\n}\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%]:hover {\\n  background-color: #9f1263;\\n}\\nbutton[type=\\\"button\\\"][_ngcontent-%COMP%] {\\n  background-color: #ff4b4b;\\n  margin-top: 15px;\\n}\\nbutton[type=\\\"button\\\"][_ngcontent-%COMP%]:hover {\\n  background-color: #ff0000;\\n}\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%], \\nbutton[type=\\\"button\\\"][_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 12px;\\n  border-radius: 8px;\\n}\\ninput[_ngcontent-%COMP%], \\ntextarea[_ngcontent-%COMP%] {\\n  font-size: 1rem;\\n  border-radius: 5px;\\n  border: 1px solid #ccc;\\n  padding: 10px;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n.regresar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  padding: 10px 20px;\\n  background-color: #007bff;\\n  color: white;\\n  font-size: 16px;\\n  text-decoration: none;\\n  border-radius: 5px;\\n  font-weight: bold;\\n  text-align: center;\\n  cursor: pointer;\\n  transition: background-color 0.3s, transform 0.2s;\\n}\\n\\n\\n.regresar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  background-color: #0056b3;\\n  transform: scale(1.05);\\n}\\n\\n\\n.regresar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  box-shadow: 0 0 0 2px #ffcc00;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvcGFnZXMvcGVyZmlsL3BlcmZpbC5jb21wb25lbnQubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDJHQUFBO0VBQ0EsMkJBQUE7RUFDQSxhQUFBO0FBQ0Y7QUFDQTtFQUNFLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx5QkFBQTtFQUNBLGtCQUFBO0VBQ0EseUNBQUE7QUFDRjtBQUVBO0VBQ0Usa0JBQUE7RUFDQSxlQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0FBQUY7QUFHQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLFNBQUE7QUFERjtBQUlBO0VBQ0UsZUFBQTtFQUNBLFdBQUE7QUFGRjtBQUtBOzs7RUFHRSxhQUFBO0VBQ0EsZUFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0FBSEY7QUFNQTtFQUNFLGdCQUFBO0VBQ0EsYUFBQTtBQUpGO0FBT0E7RUFDRSxnQkFBQTtBQUxGO0FBUUE7RUFDRSx5QkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsaUNBQUE7RUFDQSxrQkFBQTtBQU5GO0FBU0E7RUFDRSx5QkFBQTtBQVBGO0FBVUE7RUFDRSx5QkFBQTtFQUNBLGdCQUFBO0FBUkY7QUFXQTtFQUNFLHlCQUFBO0FBVEY7QUFZQTtFQUNFLHlCQUFBO0VBQ0EsZ0JBQUE7QUFWRjtBQWFBO0VBQ0UseUJBQUE7QUFYRjtBQWNBOztFQUVFLFdBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFaRjtBQWVBOztFQUVFLGVBQUE7RUFDQSxrQkFBQTtFQUNBLHNCQUFBO0VBQ0EsYUFBQTtFQUNBLFdBQUE7RUFDQSxzQkFBQTtBQWJGO0FBZUE7RUFDRSxxQkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLHFCQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLGlEQUFBO0FBYkY7QUFDQSxpQkFBaUI7QUFnQmpCO0VBQ0UseUJBQUE7RUFDQSxzQkFBQTtBQWRGO0FBQ0EsaURBQWlEO0FBaUJqRDtFQUNFLGFBQUE7RUFDQSw2QkFBQTtBQWZGIiwic291cmNlc0NvbnRlbnQiOlsibWFpbntcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdodHRwczovL2p6b3lreHRnc2h0b2pwaWt6aGhkLnN1cGFiYXNlLmNvL3N0b3JhZ2UvdjEvb2JqZWN0L3B1YmxpYy9ob21lcy9mb25kby5qcGVnJyk7XG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDsgIFxufVxuLnBlcmZpbC1jb250YWluZXIge1xuICBtYXgtd2lkdGg6IDYwMHB4O1xuICBtYXJnaW46IGF1dG87XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG59XG5cbi5wZXJmaWwtY29udGFpbmVyIGgxIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDJyZW07XG4gIGNvbG9yOiAjMzMzO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG5mb3JtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiAxNXB4O1xufVxuXG5sYWJlbCB7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbiAgY29sb3I6ICM1NTU7XG59XG5cbmlucHV0W3R5cGU9XCJ0ZXh0XCJdLFxuaW5wdXRbdHlwZT1cImVtYWlsXCJdLFxudGV4dGFyZWEge1xuICBwYWRkaW5nOiAxMHB4O1xuICBmb250LXNpemU6IDFyZW07XG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgbWFyZ2luLXRvcDogNXB4O1xufVxuXG50ZXh0YXJlYSB7XG4gIHJlc2l6ZTogdmVydGljYWw7XG4gIGhlaWdodDogMTAwcHg7XG59XG5cbmlucHV0W3R5cGU9XCJmaWxlXCJdIHtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuYnV0dG9uIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzRlOTk1MjtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXI6IG5vbmU7XG4gIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xuICBhbGlnbi1zZWxmOiBjZW50ZXI7XG59XG5cbmJ1dHRvbjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzYjdlM2E7XG59XG5cbmJ1dHRvblt0eXBlPVwic3VibWl0XCJdIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2M5MTY3ZTtcbiAgbWFyZ2luLXRvcDogMjBweDtcbn1cblxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl06aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWYxMjYzO1xufVxuXG5idXR0b25bdHlwZT1cImJ1dHRvblwiXSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjRiNGI7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG59XG5cbmJ1dHRvblt0eXBlPVwiYnV0dG9uXCJdOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMDtcbn1cblxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0sXG5idXR0b25bdHlwZT1cImJ1dHRvblwiXSB7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAxMnB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG59XG5cbmlucHV0LFxudGV4dGFyZWEge1xuICBmb250LXNpemU6IDFyZW07XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgcGFkZGluZzogMTBweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG4ucmVncmVzYXIgYSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcGFkZGluZzogMTBweCAyMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xuICBjb2xvcjogd2hpdGU7IFxuICBmb250LXNpemU6IDE2cHg7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTsgXG4gIGJvcmRlci1yYWRpdXM6IDVweDsgXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzLCB0cmFuc2Zvcm0gMC4ycztcbn1cblxuLyogRWZlY3RvIGhvdmVyICovXG4ucmVncmVzYXIgYTpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7XG4gIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7IFxufVxuXG4vKiBFZmVjdG8gZGUgZW5mb3F1ZSAoZm9jdXMpIHBhcmEgYWNjZXNpYmlsaWRhZCAqL1xuLnJlZ3Jlc2FyIGE6Zm9jdXMge1xuICBvdXRsaW5lOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAycHggI2ZmY2MwMDsgXG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n  return PerfilComponent;\n})();","map":{"version":3,"names":["Swal","FormsModule","CommonModule","HttpClientModule","PerfilComponent","userService","router","profile","fullName","email","userName","password","bio","profilePicture","constructor","ngOnInit","localStorage","getItem","getProfile","subscribe","next","userProfile","navigate","error","err","console","onFileSelected","event","file","target","files","reader","FileReader","onload","e","result","readAsDataURL","updateProfile","fire","title","text","icon","response","success","setItem","toLowerCase","trim","JSON","stringify","message","logout","removeItem","i0","ɵɵdirectiveInject","i1","UserService","i2","Router","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","PerfilComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","PerfilComponent_Template_form_ngSubmit_3_listener","ɵɵtwoWayListener","PerfilComponent_Template_input_ngModelChange_6_listener","$event","ɵɵtwoWayBindingSet","PerfilComponent_Template_input_ngModelChange_9_listener","PerfilComponent_Template_input_ngModelChange_12_listener","PerfilComponent_Template_textarea_ngModelChange_15_listener","PerfilComponent_Template_input_change_18_listener","PerfilComponent_Template_button_click_21_listener","ɵɵadvance","ɵɵtwoWayProperty","i3","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","NgModel","NgForm","styles"],"sources":["C:\\Users\\Nereida Ramos\\Downloads\\tercera_entrega_front\\src\\app\\features\\pages\\perfil\\perfil.component.ts","C:\\Users\\Nereida Ramos\\Downloads\\tercera_entrega_front\\src\\app\\features\\pages\\perfil\\perfil.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UserService } from '../../../services/supabase/user.service';\r\nimport Swal from 'sweetalert2';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterLink } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http'; \r\n\r\n@Component({\r\n  selector: 'app-perfil',\r\n  standalone: true,\r\n  imports: [RouterLink, FormsModule, CommonModule, HttpClientModule], \r\n  templateUrl: './perfil.component.html',\r\n  styleUrls: ['./perfil.component.less']\r\n})\r\nexport class PerfilComponent implements OnInit {\r\n  profile: any = { fullName: '', email: '', userName: '', password: '', bio: '', profilePicture: '' };\r\n\r\n  constructor(private userService: UserService, private router: Router) {}\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    const userName = localStorage.getItem('currentUser');\r\n    if (userName) {\r\n      this.userService.getProfile(userName).subscribe({\r\n        next: (userProfile) => {\r\n          if (userProfile) {\r\n            this.profile = userProfile;\r\n          } else {\r\n            this.router.navigate(['/login']);\r\n          }\r\n        },\r\n        error: (err) => {\r\n          console.error('Error al obtener el perfil', err);\r\n          this.router.navigate(['/login']);\r\n        }\r\n      });\r\n    } else {\r\n      this.router.navigate(['/login']);\r\n    }\r\n  }\r\n\r\n  onFileSelected(event: any) {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e: any) => {\r\n        this.profile.profilePicture = e.target.result; \r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  updateProfile() {\r\n    const { fullName, email, password, userName, bio, profilePicture } = this.profile;\r\n\r\n    if (!fullName || !email || !password || !userName) {\r\n      Swal.fire({\r\n        title: 'Error',\r\n        text: 'Debe completar todos los campos',\r\n        icon: 'error'\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.userService.updateProfile(userName, { fullName, email, password, userName, bio, profilePicture }).subscribe({\r\n      next: (response) => {\r\n        if (response.success) {\r\n          localStorage.setItem(userName.toLowerCase().trim(), JSON.stringify(this.profile));\r\n          localStorage.setItem('currentUser', userName.toLowerCase().trim());\r\n\r\n          Swal.fire({\r\n            title: 'Éxito',\r\n            text: 'Perfil actualizado correctamente',\r\n            icon: 'success'\r\n          });\r\n        } else {\r\n          Swal.fire({\r\n            title: 'Error',\r\n            text: response.message,\r\n            icon: 'error'\r\n          });\r\n        }\r\n      },\r\n      error: (err) => {\r\n        Swal.fire({\r\n          title: 'Error',\r\n          text: 'No se pudo actualizar el perfil',\r\n          icon: 'error'\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('currentUser');\r\n    this.router.navigate(['/login']);\r\n  }\r\n}\r\n","<div class=\"perfil-container\"> \r\n  <h1>Perfil de Usuario</h1>\r\n  <form id=\"perfilForm\" (ngSubmit)=\"updateProfile()\">\r\n    <label for=\"nombreCompleto\">Nombre Completo:</label>\r\n    <input type=\"text\" id=\"nombreCompleto\" [(ngModel)]=\"profile.fullName\" name=\"nombreCompleto\" required>\r\n\r\n    <label for=\"email\">Correo Electrónico:</label>\r\n    <input type=\"email\" id=\"email\" [(ngModel)]=\"profile.email\" name=\"email\" required>\r\n\r\n    <label for=\"userName\">Nombre de Usuario:</label>\r\n    <input type=\"text\" id=\"userName\" [(ngModel)]=\"profile.userName\" name=\"userName\" required>\r\n    \r\n    <label for=\"bio\">Biografía:</label>\r\n    <textarea id=\"bio\" [(ngModel)]=\"profile.bio\" name=\"bio\"></textarea>\r\n    \r\n    <label for=\"profilePicture\">Foto de Perfil:</label>\r\n    <input type=\"file\" id=\"profilePicture\" (change)=\"onFileSelected($event)\" name=\"profilePicture\">\r\n\r\n    <button type=\"submit\">Actualizar Perfil</button>\r\n  </form>\r\n  <button (click)=\"logout()\" id=\"logoutBtn\">Cerrar Sesión</button>\r\n</div>\r\n"],"mappings":"AAGA,OAAOA,IAAI,MAAM,aAAa;AAC9B,SAASC,WAAW,QAAQ,gBAAgB;AAE5C,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,gBAAgB,QAAQ,sBAAsB;;;;;AASvD,WAAaC,eAAe;EAAtB,MAAOA,eAAe;IAGNC,WAAA;IAAkCC,MAAA;IAFtDC,OAAO,GAAQ;MAAEC,QAAQ,EAAE,EAAE;MAAEC,KAAK,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,GAAG,EAAE,EAAE;MAAEC,cAAc,EAAE;IAAE,CAAE;IAEnGC,YAAoBT,WAAwB,EAAUC,MAAc;MAAhD,KAAAD,WAAW,GAAXA,WAAW;MAAuB,KAAAC,MAAM,GAANA,MAAM;IAAW;IAIvES,QAAQA,CAAA;MACN,MAAML,QAAQ,GAAGM,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACpD,IAAIP,QAAQ,EAAE;QACZ,IAAI,CAACL,WAAW,CAACa,UAAU,CAACR,QAAQ,CAAC,CAACS,SAAS,CAAC;UAC9CC,IAAI,EAAGC,WAAW,IAAI;YACpB,IAAIA,WAAW,EAAE;cACf,IAAI,CAACd,OAAO,GAAGc,WAAW;YAC5B,CAAC,MAAM;cACL,IAAI,CAACf,MAAM,CAACgB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;YAClC;UACF,CAAC;UACDC,KAAK,EAAGC,GAAG,IAAI;YACbC,OAAO,CAACF,KAAK,CAAC,4BAA4B,EAAEC,GAAG,CAAC;YAChD,IAAI,CAAClB,MAAM,CAACgB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;UAClC;SACD,CAAC;MACJ,CAAC,MAAM;QACL,IAAI,CAAChB,MAAM,CAACgB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;MAClC;IACF;IAEAI,cAAcA,CAACC,KAAU;MACvB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIF,IAAI,EAAE;QACR,MAAMG,MAAM,GAAG,IAAIC,UAAU,EAAE;QAC/BD,MAAM,CAACE,MAAM,GAAIC,CAAM,IAAI;UACzB,IAAI,CAAC3B,OAAO,CAACM,cAAc,GAAGqB,CAAC,CAACL,MAAM,CAACM,MAAM;QAC/C,CAAC;QACDJ,MAAM,CAACK,aAAa,CAACR,IAAI,CAAC;MAC5B;IACF;IAEAS,aAAaA,CAAA;MACX,MAAM;QAAE7B,QAAQ;QAAEC,KAAK;QAAEE,QAAQ;QAAED,QAAQ;QAAEE,GAAG;QAAEC;MAAc,CAAE,GAAG,IAAI,CAACN,OAAO;MAEjF,IAAI,CAACC,QAAQ,IAAI,CAACC,KAAK,IAAI,CAACE,QAAQ,IAAI,CAACD,QAAQ,EAAE;QACjDV,IAAI,CAACsC,IAAI,CAAC;UACRC,KAAK,EAAE,OAAO;UACdC,IAAI,EAAE,iCAAiC;UACvCC,IAAI,EAAE;SACP,CAAC;QACF;MACF;MAEA,IAAI,CAACpC,WAAW,CAACgC,aAAa,CAAC3B,QAAQ,EAAE;QAAEF,QAAQ;QAAEC,KAAK;QAAEE,QAAQ;QAAED,QAAQ;QAAEE,GAAG;QAAEC;MAAc,CAAE,CAAC,CAACM,SAAS,CAAC;QAC/GC,IAAI,EAAGsB,QAAQ,IAAI;UACjB,IAAIA,QAAQ,CAACC,OAAO,EAAE;YACpB3B,YAAY,CAAC4B,OAAO,CAAClC,QAAQ,CAACmC,WAAW,EAAE,CAACC,IAAI,EAAE,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACzC,OAAO,CAAC,CAAC;YACjFS,YAAY,CAAC4B,OAAO,CAAC,aAAa,EAAElC,QAAQ,CAACmC,WAAW,EAAE,CAACC,IAAI,EAAE,CAAC;YAElE9C,IAAI,CAACsC,IAAI,CAAC;cACRC,KAAK,EAAE,OAAO;cACdC,IAAI,EAAE,kCAAkC;cACxCC,IAAI,EAAE;aACP,CAAC;UACJ,CAAC,MAAM;YACLzC,IAAI,CAACsC,IAAI,CAAC;cACRC,KAAK,EAAE,OAAO;cACdC,IAAI,EAAEE,QAAQ,CAACO,OAAO;cACtBR,IAAI,EAAE;aACP,CAAC;UACJ;QACF,CAAC;QACDlB,KAAK,EAAGC,GAAG,IAAI;UACbxB,IAAI,CAACsC,IAAI,CAAC;YACRC,KAAK,EAAE,OAAO;YACdC,IAAI,EAAE,iCAAiC;YACvCC,IAAI,EAAE;WACP,CAAC;QACJ;OACD,CAAC;IACJ;IAEAS,MAAMA,CAAA;MACJlC,YAAY,CAACmC,UAAU,CAAC,aAAa,CAAC;MACtC,IAAI,CAAC7C,MAAM,CAACgB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;IAClC;;uCAnFWlB,eAAe,EAAAgD,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,MAAA;IAAA;;YAAfrD,eAAe;MAAAsD,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAAR,EAAA,CAAAS,mBAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,yBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCf1Bf,EADF,CAAAiB,cAAA,aAA8B,SACxB;UAAAjB,EAAA,CAAAkB,MAAA,wBAAiB;UAAAlB,EAAA,CAAAmB,YAAA,EAAK;UAC1BnB,EAAA,CAAAiB,cAAA,cAAmD;UAA7BjB,EAAA,CAAAoB,UAAA,sBAAAC,kDAAA;YAAA,OAAYL,GAAA,CAAA/B,aAAA,EAAe;UAAA,EAAC;UAChDe,EAAA,CAAAiB,cAAA,eAA4B;UAAAjB,EAAA,CAAAkB,MAAA,uBAAgB;UAAAlB,EAAA,CAAAmB,YAAA,EAAQ;UACpDnB,EAAA,CAAAiB,cAAA,eAAqG;UAA9DjB,EAAA,CAAAsB,gBAAA,2BAAAC,wDAAAC,MAAA;YAAAxB,EAAA,CAAAyB,kBAAA,CAAAT,GAAA,CAAA7D,OAAA,CAAAC,QAAA,EAAAoE,MAAA,MAAAR,GAAA,CAAA7D,OAAA,CAAAC,QAAA,GAAAoE,MAAA;YAAA,OAAAA,MAAA;UAAA,EAA8B;UAArExB,EAAA,CAAAmB,YAAA,EAAqG;UAErGnB,EAAA,CAAAiB,cAAA,eAAmB;UAAAjB,EAAA,CAAAkB,MAAA,+BAAmB;UAAAlB,EAAA,CAAAmB,YAAA,EAAQ;UAC9CnB,EAAA,CAAAiB,cAAA,eAAiF;UAAlDjB,EAAA,CAAAsB,gBAAA,2BAAAI,wDAAAF,MAAA;YAAAxB,EAAA,CAAAyB,kBAAA,CAAAT,GAAA,CAAA7D,OAAA,CAAAE,KAAA,EAAAmE,MAAA,MAAAR,GAAA,CAAA7D,OAAA,CAAAE,KAAA,GAAAmE,MAAA;YAAA,OAAAA,MAAA;UAAA,EAA2B;UAA1DxB,EAAA,CAAAmB,YAAA,EAAiF;UAEjFnB,EAAA,CAAAiB,cAAA,gBAAsB;UAAAjB,EAAA,CAAAkB,MAAA,0BAAkB;UAAAlB,EAAA,CAAAmB,YAAA,EAAQ;UAChDnB,EAAA,CAAAiB,cAAA,gBAAyF;UAAxDjB,EAAA,CAAAsB,gBAAA,2BAAAK,yDAAAH,MAAA;YAAAxB,EAAA,CAAAyB,kBAAA,CAAAT,GAAA,CAAA7D,OAAA,CAAAG,QAAA,EAAAkE,MAAA,MAAAR,GAAA,CAAA7D,OAAA,CAAAG,QAAA,GAAAkE,MAAA;YAAA,OAAAA,MAAA;UAAA,EAA8B;UAA/DxB,EAAA,CAAAmB,YAAA,EAAyF;UAEzFnB,EAAA,CAAAiB,cAAA,gBAAiB;UAAAjB,EAAA,CAAAkB,MAAA,uBAAU;UAAAlB,EAAA,CAAAmB,YAAA,EAAQ;UACnCnB,EAAA,CAAAiB,cAAA,mBAAwD;UAArCjB,EAAA,CAAAsB,gBAAA,2BAAAM,4DAAAJ,MAAA;YAAAxB,EAAA,CAAAyB,kBAAA,CAAAT,GAAA,CAAA7D,OAAA,CAAAK,GAAA,EAAAgE,MAAA,MAAAR,GAAA,CAAA7D,OAAA,CAAAK,GAAA,GAAAgE,MAAA;YAAA,OAAAA,MAAA;UAAA,EAAyB;UAAYxB,EAAA,CAAAmB,YAAA,EAAW;UAEnEnB,EAAA,CAAAiB,cAAA,iBAA4B;UAAAjB,EAAA,CAAAkB,MAAA,uBAAe;UAAAlB,EAAA,CAAAmB,YAAA,EAAQ;UACnDnB,EAAA,CAAAiB,cAAA,iBAA+F;UAAxDjB,EAAA,CAAAoB,UAAA,oBAAAS,kDAAAL,MAAA;YAAA,OAAUR,GAAA,CAAA1C,cAAA,CAAAkD,MAAA,CAAsB;UAAA,EAAC;UAAxExB,EAAA,CAAAmB,YAAA,EAA+F;UAE/FnB,EAAA,CAAAiB,cAAA,kBAAsB;UAAAjB,EAAA,CAAAkB,MAAA,yBAAiB;UACzClB,EADyC,CAAAmB,YAAA,EAAS,EAC3C;UACPnB,EAAA,CAAAiB,cAAA,kBAA0C;UAAlCjB,EAAA,CAAAoB,UAAA,mBAAAU,kDAAA;YAAA,OAASd,GAAA,CAAAlB,MAAA,EAAQ;UAAA,EAAC;UAAgBE,EAAA,CAAAkB,MAAA,0BAAa;UACzDlB,EADyD,CAAAmB,YAAA,EAAS,EAC5D;;;UAjBqCnB,EAAA,CAAA+B,SAAA,GAA8B;UAA9B/B,EAAA,CAAAgC,gBAAA,YAAAhB,GAAA,CAAA7D,OAAA,CAAAC,QAAA,CAA8B;UAGtC4C,EAAA,CAAA+B,SAAA,GAA2B;UAA3B/B,EAAA,CAAAgC,gBAAA,YAAAhB,GAAA,CAAA7D,OAAA,CAAAE,KAAA,CAA2B;UAGzB2C,EAAA,CAAA+B,SAAA,GAA8B;UAA9B/B,EAAA,CAAAgC,gBAAA,YAAAhB,GAAA,CAAA7D,OAAA,CAAAG,QAAA,CAA8B;UAG5C0C,EAAA,CAAA+B,SAAA,GAAyB;UAAzB/B,EAAA,CAAAgC,gBAAA,YAAAhB,GAAA,CAAA7D,OAAA,CAAAK,GAAA,CAAyB;;;qBDDxBX,WAAW,EAAAoF,EAAA,CAAAC,aAAA,EAAAD,EAAA,CAAAE,oBAAA,EAAAF,EAAA,CAAAG,eAAA,EAAAH,EAAA,CAAAI,oBAAA,EAAAJ,EAAA,CAAAK,iBAAA,EAAAL,EAAA,CAAAM,OAAA,EAAAN,EAAA,CAAAO,MAAA,EAAE1F,YAAY,EAAEC,gBAAgB;MAAA0F,MAAA;IAAA;;SAItDzF,eAAe;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}