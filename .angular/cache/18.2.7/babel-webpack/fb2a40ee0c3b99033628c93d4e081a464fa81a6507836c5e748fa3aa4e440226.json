{"ast":null,"code":"import { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/supabase/booking.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction BookingComponent_div_8_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"El ID de la propiedad es obligatorio.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BookingComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, BookingComponent_div_8_small_1_Template, 2, 0, \"small\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.bookingForm.get(\"listingId\")) == null ? null : tmp_1_0.hasError(\"required\"));\n  }\n}\nfunction BookingComponent_div_12_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"La fecha de inicio es obligatoria.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BookingComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, BookingComponent_div_12_small_1_Template, 2, 0, \"small\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.bookingForm.get(\"startDate\")) == null ? null : tmp_1_0.hasError(\"required\"));\n  }\n}\nfunction BookingComponent_div_16_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"La fecha de fin es obligatoria.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BookingComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, BookingComponent_div_16_small_1_Template, 2, 0, \"small\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.bookingForm.get(\"endDate\")) == null ? null : tmp_1_0.hasError(\"required\"));\n  }\n}\nfunction BookingComponent_div_20_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"El precio total es obligatorio.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BookingComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, BookingComponent_div_20_small_1_Template, 2, 0, \"small\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.bookingForm.get(\"totalPrice\")) == null ? null : tmp_1_0.hasError(\"required\"));\n  }\n}\nfunction BookingComponent_For_31_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function BookingComponent_For_31_div_0_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const book_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.cancelarReserva(book_r3.booking_id));\n    });\n    i0.ɵɵtext(2, \"Eliminar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h2\", 22);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"label\", 22);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 22);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"label\", 22);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"label\", 22);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"label\", 22);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const book_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(\"Reserva \" + book_r3.booking_id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r3.created_at);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r3.start_date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r3.total_price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r3.end_date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r3.created_at);\n  }\n}\nfunction BookingComponent_For_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, BookingComponent_For_31_div_0_Template, 15, 6, \"div\", 20);\n  }\n  if (rf & 2) {\n    const book_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngIf\", book_r3.canceled == null);\n  }\n}\nexport let BookingComponent = /*#__PURE__*/(() => {\n  class BookingComponent {\n    fb;\n    bookingService;\n    route;\n    router;\n    booking = [];\n    actualuser = JSON.parse(localStorage.getItem('user'));\n    bookingForm;\n    propertyId = '';\n    constructor(fb, bookingService, route, router) {\n      this.fb = fb;\n      this.bookingService = bookingService;\n      this.route = route;\n      this.router = router;\n      // Definir el formulario con los controles necesarios\n      this.bookingForm = this.fb.group({\n        listingId: ['', [Validators.required, Validators.pattern(/^\\d+$/)]],\n        startDate: ['', Validators.required],\n        endDate: ['', Validators.required],\n        totalPrice: ['', [Validators.required, Validators.min(0)]]\n      });\n    }\n    ngOnInit() {\n      // Obtener el ID de la propiedad desde la URL\n      this.propertyId = this.route.snapshot.paramMap.get('id') || '';\n    }\n    // Método para realizar la reserva\n    onSubmit() {\n      if (this.bookingForm.valid) {\n        // Obtener las fechas como cadenas en formato YYYY-MM-DD\n        const startDate = this.bookingForm.value.startDate;\n        const endDate = this.bookingForm.value.endDate;\n        // Validar que las fechas no sean inválidas\n        if (!startDate || !endDate) {\n          console.error('Las fechas de inicio o fin son inválidas');\n          return;\n        }\n        //aqui establecmos un precio pr defecto para proba\n        const totalPrice = this.bookingForm.value.totalPrice || 56437;\n        // Obtener el user_id del localStorage (asegúrate que el usuario esté autenticado)\n        const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n        const userId = currentUser?.user_id;\n        // Validar que se obtuvo el user_id\n        if (!userId) {\n          console.error('No se pudo obtener el user_id del usuario');\n          return;\n        }\n        // Preparar los datos de la reserva, asegurándose de que las fechas estén en formato correcto\n        const bookingData = {\n          listing_id: parseInt(this.bookingForm.value.listingId, 10),\n          user_id: userId,\n          start_date: startDate,\n          end_date: endDate,\n          total_price: totalPrice\n        };\n        // Llamar al servicio para realizar la reserva\n        this.bookingService.realizarReserva(bookingData).subscribe(response => {\n          console.log('Reserva realizada con éxito', response);\n          this.router.navigate(['/property-list']);\n        }, error => {\n          console.error('Error al realizar la reserva', error);\n          if (error.error && error.error.message) {\n            console.error('Errores específicos:', error.error.message);\n          }\n        });\n      } else {\n        console.error('Formulario inválido');\n      }\n    }\n    // Método para cancelar una reserva\n    cancelarReserva(bookingId) {\n      this.bookingService.cancelarReserva(bookingId).subscribe(response => {\n        console.log('Reserva cancelada', response);\n      }, error => {\n        console.error('Error al cancelar la reserva', error);\n      });\n    }\n    submitget() {\n      this.bookingService.obtenerReservasBuyer(this.actualuser.user_id).subscribe(response => {\n        console.log('Reserva cancelada', response);\n        this.booking.push(response);\n      }, error => {\n        console.error('Error al cancelar la reserva', error);\n      });\n    }\n    print(reu) {\n      console.log(reu);\n    }\n    ObtenerReserva(bookingId) {\n      console.log(\"w\");\n    }\n    static ɵfac = function BookingComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || BookingComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.BookingService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: BookingComponent,\n      selectors: [[\"app-booking\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 32,\n      vars: 14,\n      consts: [[1, \"todo\"], [1, \"btn-primary\", 3, \"click\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-container\"], [\"for\", \"listingId\"], [\"type\", \"number\", \"id\", \"listingId\", \"formControlName\", \"listingId\", \"required\", \"\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"for\", \"startDate\"], [\"type\", \"date\", \"id\", \"startDate\", \"formControlName\", \"startDate\", \"required\", \"\"], [\"for\", \"endDate\"], [\"type\", \"date\", \"id\", \"endDate\", \"formControlName\", \"endDate\", \"required\", \"\"], [\"for\", \"totalPrice\"], [\"type\", \"number\", \"id\", \"totalPrice\", \"formControlName\", \"totalPrice\", \"required\", \"\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"regresar\"], [\"routerLink\", \"/home\"], [1, \"reservations-container\"], [1, \"reservation-item\"], [1, \"error-message\"], [4, \"ngIf\"], [\"class\", \"reservation-item\", 4, \"ngIf\"], [1, \"reservation-actions\", 3, \"click\"], [1, \"reservation-details\"]],\n      template: function BookingComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"main\", 0)(1, \"button\", 1);\n          i0.ɵɵlistener(\"click\", function BookingComponent_Template_button_click_1_listener() {\n            return ctx.submitget();\n          });\n          i0.ɵɵtext(2, \"Mis reservas\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function BookingComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"label\", 4);\n          i0.ɵɵtext(6, \"ID de la propiedad:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(7, \"input\", 5);\n          i0.ɵɵtemplate(8, BookingComponent_div_8_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementStart(9, \"label\", 7);\n          i0.ɵɵtext(10, \"Fecha de inicio:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(11, \"input\", 8);\n          i0.ɵɵtemplate(12, BookingComponent_div_12_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementStart(13, \"label\", 9);\n          i0.ɵɵtext(14, \"Fecha de fin:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 10);\n          i0.ɵɵtemplate(16, BookingComponent_div_16_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementStart(17, \"label\", 11);\n          i0.ɵɵtext(18, \"Precio total:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 12);\n          i0.ɵɵtemplate(20, BookingComponent_div_20_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementStart(21, \"button\", 13);\n          i0.ɵɵtext(22, \"Realizar reserva\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 14)(24, \"p\")(25, \"a\", 15);\n          i0.ɵɵtext(26, \"Regresar\");\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(27, \"div\", 16)(28, \"label\", 4);\n          i0.ɵɵtext(29, \"ID de la propiedad:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵrepeaterCreate(30, BookingComponent_For_31_Template, 1, 1, \"div\", 17, i0.ɵɵrepeaterTrackByIndex);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          let tmp_1_0;\n          let tmp_2_0;\n          let tmp_3_0;\n          let tmp_4_0;\n          let tmp_5_0;\n          let tmp_6_0;\n          let tmp_7_0;\n          let tmp_8_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.bookingForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵclassProp(\"invalid\", !((tmp_1_0 = ctx.bookingForm.get(\"listingId\")) == null ? null : tmp_1_0.valid) && ((tmp_1_0 = ctx.bookingForm.get(\"listingId\")) == null ? null : tmp_1_0.touched));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !((tmp_2_0 = ctx.bookingForm.get(\"listingId\")) == null ? null : tmp_2_0.valid) && ((tmp_2_0 = ctx.bookingForm.get(\"listingId\")) == null ? null : tmp_2_0.touched));\n          i0.ɵɵadvance(3);\n          i0.ɵɵclassProp(\"invalid\", !((tmp_3_0 = ctx.bookingForm.get(\"startDate\")) == null ? null : tmp_3_0.valid) && ((tmp_3_0 = ctx.bookingForm.get(\"startDate\")) == null ? null : tmp_3_0.touched));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !((tmp_4_0 = ctx.bookingForm.get(\"startDate\")) == null ? null : tmp_4_0.valid) && ((tmp_4_0 = ctx.bookingForm.get(\"startDate\")) == null ? null : tmp_4_0.touched));\n          i0.ɵɵadvance(3);\n          i0.ɵɵclassProp(\"invalid\", !((tmp_5_0 = ctx.bookingForm.get(\"endDate\")) == null ? null : tmp_5_0.valid) && ((tmp_5_0 = ctx.bookingForm.get(\"endDate\")) == null ? null : tmp_5_0.touched));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !((tmp_6_0 = ctx.bookingForm.get(\"endDate\")) == null ? null : tmp_6_0.valid) && ((tmp_6_0 = ctx.bookingForm.get(\"endDate\")) == null ? null : tmp_6_0.touched));\n          i0.ɵɵadvance(3);\n          i0.ɵɵclassProp(\"invalid\", !((tmp_7_0 = ctx.bookingForm.get(\"totalPrice\")) == null ? null : tmp_7_0.valid) && ((tmp_7_0 = ctx.bookingForm.get(\"totalPrice\")) == null ? null : tmp_7_0.touched));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !((tmp_8_0 = ctx.bookingForm.get(\"totalPrice\")) == null ? null : tmp_8_0.valid) && ((tmp_8_0 = ctx.bookingForm.get(\"totalPrice\")) == null ? null : tmp_8_0.touched));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", !ctx.bookingForm.valid);\n          i0.ɵɵadvance(9);\n          i0.ɵɵrepeater(ctx.booking[0]);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, CommonModule, i4.NgIf, RouterLink],\n      styles: [\"body[_ngcontent-%COMP%] {\\n  background: #315196;\\n  font-family: Arial, sans-serif;\\n  margin: 0;\\n  padding: 0;\\n  color: #fff;\\n  \\n}\\n\\nmain[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: space-between;\\n  gap: 20px;\\n  padding: 20px;\\n  border: 7px solid #000;\\n}\\n\\nform[_ngcontent-%COMP%] {\\n  flex: 1;\\n  min-width: 300px;\\n}\\n\\n.form-container[_ngcontent-%COMP%], \\n.reservations-container[_ngcontent-%COMP%] {\\n  background-color: #253e5e;\\n  padding: 20px;\\n  border-radius: 10px;\\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\\n  flex: 1;\\n  min-width: 300px;\\n}\\n\\n.reservation-item[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  background: #525758;\\n  border: 3px solid #000;\\n  border-radius: 20px;\\n  margin: 10px 0;\\n  padding: 15px;\\n  box-shadow: 0 4px 6px green;\\n  transition: transform 0.5s, box-shadow 0.2s;\\n  cursor: pointer;\\n}\\n\\n.reservation-item[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.11);\\n  box-shadow: 0 2px 1px green;\\n}\\n\\n.reservation-details[_ngcontent-%COMP%] {\\n  text-align: left;\\n  color: #000;\\n}\\n\\n.form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-bottom: 5px;\\n  color: #000;\\n  font-weight: bold;\\n}\\n\\n.form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  margin-bottom: 15px;\\n  border: 3px solid #000000;\\n  border-radius: 5px;\\n  box-sizing: border-box;\\n}\\n\\n.form-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%] {\\n  padding: 10px 15px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-weight: bold;\\n  background: #cc0101;\\n  color: white;\\n  transition: background 0.2s;\\n}\\n.reservation-actions[_ngcontent-%COMP%] {\\n  padding: 10px 15px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-weight: bold;\\n  background: #cc0101;\\n  color: rgb(14, 14, 14);\\n  transition: background 0.2s;\\n}\\n.btn-primary[_ngcontent-%COMP%]{\\n  padding: 10px 10px;\\n  cursor: pointer;\\n  margin: 10px 20px;\\n  border-radius: 10%;\\n  font-size: 10px;\\n}\\n.todo[_ngcontent-%COMP%]{\\n  background: #41697c;\\n  font-family: Arial, sans-serif;\\n  margin: 0;\\n  padding: 0;\\n  color: #fff;\\n}\\n.reservation-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover {\\n  background: #2f3121;\\n}\\n\\n.form-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled {\\n  background: #ccc;\\n  cursor: not-allowed;\\n}\\n\\n.form-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:enabled {\\n  background: #1c7432;\\n}\\n\\n.form-container[_ngcontent-%COMP%], regresar[_ngcontent-%COMP%]  {\\n  color: #fff;\\n  text-decoration: none;\\n}\\n\\n.form-container[_ngcontent-%COMP%]   .regresar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvcGFnZXMvYm9va2luZy9ib29raW5nLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQkFBbUI7RUFDbkIsOEJBQThCO0VBQzlCLFNBQVM7RUFDVCxVQUFVO0VBQ1YsV0FBVzs7QUFFYjs7QUFFQTtFQUNFLGFBQWE7RUFDYixlQUFlO0VBQ2YsOEJBQThCO0VBQzlCLFNBQVM7RUFDVCxhQUFhO0VBQ2Isc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsT0FBTztFQUNQLGdCQUFnQjtBQUNsQjs7QUFFQTs7RUFFRSx5QkFBeUI7RUFDekIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix5Q0FBeUM7RUFDekMsT0FBTztFQUNQLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsbUJBQW1CO0VBQ25CLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLGNBQWM7RUFDZCxhQUFhO0VBQ2IsMkJBQTJCO0VBQzNCLDJDQUEyQztFQUMzQyxlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWiwyQkFBMkI7QUFDN0I7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLHNCQUFzQjtFQUN0QiwyQkFBMkI7QUFDN0I7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxtQkFBbUI7RUFDbkIsOEJBQThCO0VBQzlCLFNBQVM7RUFDVCxVQUFVO0VBQ1YsV0FBVztBQUNiO0FBQ0E7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsV0FBVztFQUNYLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLDBCQUEwQjtBQUM1QiIsInNvdXJjZXNDb250ZW50IjpbImJvZHkge1xyXG4gIGJhY2tncm91bmQ6ICMzMTUxOTY7XHJcbiAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIFxyXG59XHJcblxyXG5tYWluIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtd3JhcDogd3JhcDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgZ2FwOiAyMHB4O1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYm9yZGVyOiA3cHggc29saWQgIzAwMDtcclxufVxyXG5cclxuZm9ybSB7XHJcbiAgZmxleDogMTtcclxuICBtaW4td2lkdGg6IDMwMHB4O1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIsXHJcbi5yZXNlcnZhdGlvbnMtY29udGFpbmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjUzZTVlO1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBib3gtc2hhZG93OiAwIDhweCAxNnB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICBmbGV4OiAxO1xyXG4gIG1pbi13aWR0aDogMzAwcHg7XHJcbn1cclxuXHJcbi5yZXNlcnZhdGlvbi1pdGVtIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGJhY2tncm91bmQ6ICM1MjU3NTg7XHJcbiAgYm9yZGVyOiAzcHggc29saWQgIzAwMDtcclxuICBib3JkZXItcmFkaXVzOiAyMHB4O1xyXG4gIG1hcmdpbjogMTBweCAwO1xyXG4gIHBhZGRpbmc6IDE1cHg7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggNnB4IGdyZWVuO1xyXG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjVzLCBib3gtc2hhZG93IDAuMnM7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ucmVzZXJ2YXRpb24taXRlbTpob3ZlciB7XHJcbiAgdHJhbnNmb3JtOiBzY2FsZSgxLjExKTtcclxuICBib3gtc2hhZG93OiAwIDJweCAxcHggZ3JlZW47XHJcbn1cclxuXHJcbi5yZXNlcnZhdGlvbi1kZXRhaWxzIHtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIGNvbG9yOiAjMDAwO1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIgbGFiZWwge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIG1hcmdpbi1ib3R0b206IDVweDtcclxuICBjb2xvcjogIzAwMDtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuLmZvcm0tY29udGFpbmVyIGlucHV0IHtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbiAgYm9yZGVyOiAzcHggc29saWQgIzAwMDAwMDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuLmZvcm0tY29udGFpbmVyIC5idG4tcHJpbWFyeSB7XHJcbiAgcGFkZGluZzogMTBweCAxNXB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIGJhY2tncm91bmQ6ICNjYzAxMDE7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycztcclxufVxyXG4ucmVzZXJ2YXRpb24tYWN0aW9ucyB7XHJcbiAgcGFkZGluZzogMTBweCAxNXB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIGJhY2tncm91bmQ6ICNjYzAxMDE7XHJcbiAgY29sb3I6IHJnYigxNCwgMTQsIDE0KTtcclxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7XHJcbn1cclxuLmJ0bi1wcmltYXJ5e1xyXG4gIHBhZGRpbmc6IDEwcHggMTBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgbWFyZ2luOiAxMHB4IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTAlO1xyXG4gIGZvbnQtc2l6ZTogMTBweDtcclxufVxyXG4udG9kb3tcclxuICBiYWNrZ3JvdW5kOiAjNDE2OTdjO1xyXG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICBtYXJnaW46IDA7XHJcbiAgcGFkZGluZzogMDtcclxuICBjb2xvcjogI2ZmZjtcclxufVxyXG4ucmVzZXJ2YXRpb24tYWN0aW9ucyAuYnRuOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kOiAjMmYzMTIxO1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIgLmJ0bi1wcmltYXJ5OmRpc2FibGVkIHtcclxuICBiYWNrZ3JvdW5kOiAjY2NjO1xyXG4gIGN1cnNvcjogbm90LWFsbG93ZWQ7XHJcbn1cclxuXHJcbi5mb3JtLWNvbnRhaW5lciAuYnRuLXByaW1hcnk6aG92ZXI6ZW5hYmxlZCB7XHJcbiAgYmFja2dyb3VuZDogIzFjNzQzMjtcclxufVxyXG5cclxuLmZvcm0tY29udGFpbmVyLCByZWdyZXNhciAge1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5cclxuLmZvcm0tY29udGFpbmVyIC5yZWdyZXNhciBhOmhvdmVyIHtcclxuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n  return BookingComponent;\n})();","map":{"version":3,"names":["Validators","ReactiveFormsModule","RouterLink","CommonModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","BookingComponent_div_8_small_1_Template","ɵɵadvance","ɵɵproperty","tmp_1_0","ctx_r0","bookingForm","get","hasError","BookingComponent_div_12_small_1_Template","BookingComponent_div_16_small_1_Template","BookingComponent_div_20_small_1_Template","ɵɵlistener","BookingComponent_For_31_div_0_Template_button_click_1_listener","ɵɵrestoreView","_r2","book_r3","ɵɵnextContext","$implicit","ɵɵresetView","cancelarReserva","booking_id","ɵɵtextInterpolate","created_at","start_date","total_price","end_date","BookingComponent_For_31_div_0_Template","canceled","BookingComponent","fb","bookingService","route","router","booking","actualuser","JSON","parse","localStorage","getItem","propertyId","constructor","group","listingId","required","pattern","startDate","endDate","totalPrice","min","ngOnInit","snapshot","paramMap","onSubmit","valid","value","console","error","currentUser","userId","user_id","bookingData","listing_id","parseInt","realizarReserva","subscribe","response","log","navigate","message","bookingId","submitget","obtenerReservasBuyer","push","print","reu","ObtenerReserva","ɵɵdirectiveInject","i1","FormBuilder","i2","BookingService","i3","ActivatedRoute","Router","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","BookingComponent_Template","rf","ctx","BookingComponent_Template_button_click_1_listener","BookingComponent_Template_form_ngSubmit_3_listener","ɵɵelement","BookingComponent_div_8_Template","BookingComponent_div_12_Template","BookingComponent_div_16_Template","BookingComponent_div_20_Template","ɵɵrepeaterCreate","BookingComponent_For_31_Template","ɵɵrepeaterTrackByIndex","ɵɵclassProp","touched","tmp_2_0","tmp_3_0","tmp_4_0","tmp_5_0","tmp_6_0","tmp_7_0","tmp_8_0","ɵɵrepeater","ɵNgNoValidate","DefaultValueAccessor","NumberValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","FormGroupDirective","FormControlName","i4","NgIf","styles"],"sources":["C:\\Users\\Nereida Ramos\\Downloads\\tercera_entrega_front\\src\\app\\features\\pages\\booking\\booking.component.ts","C:\\Users\\Nereida Ramos\\Downloads\\tercera_entrega_front\\src\\app\\features\\pages\\booking\\booking.component.html"],"sourcesContent":["  import { Component, OnInit } from '@angular/core';\r\n  import { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\r\n  import { BookingService } from '../../../services/supabase/booking.service';\r\n  import { ActivatedRoute, Router, RouterLink } from '@angular/router';\r\n  import { CommonModule } from '@angular/common';\r\n  interface user {\r\n    isActive: boolean;\r\n    user_id: number;\r\n    email: string;  \r\n    profile_picture: string;  \r\n    is_owner: boolean;  \r\n    bio: string;  \r\n    created_at: string;  \r\n    updated_at: string;  \r\n    deleted_at: string;  \r\n  }\r\n  interface book {\r\n  Isread: boolean,\r\n  booking_id: number,\r\n  created_at: string,\r\n  deleted_at: string,\r\n  end_date: string,\r\n  start_date: string,\r\n  total_price: number,\r\n  updated_at: string\r\n}\r\n  @Component({\r\n    selector: 'app-booking',\r\n    standalone: true,\r\n    imports: [ReactiveFormsModule, CommonModule,RouterLink],\r\n    templateUrl: './booking.component.html',\r\n    styleUrls: ['./booking.component.css']\r\n  })\r\n  export class BookingComponent implements OnInit {\r\n    booking:any=[]\r\n    actualuser:user|null = JSON.parse(localStorage.getItem('user')!);\r\n\r\n    bookingForm: FormGroup;\r\n    propertyId: string = '';\r\n\r\n    constructor(\r\n      private fb: FormBuilder,\r\n      private bookingService: BookingService,\r\n      private route: ActivatedRoute,\r\n      private router: Router\r\n    ) {\r\n      // Definir el formulario con los controles necesarios\r\n      this.bookingForm = this.fb.group({\r\n        listingId: ['', [Validators.required, Validators.pattern(/^\\d+$/)]],\r\n        startDate: ['', Validators.required],\r\n        endDate: ['', Validators.required],\r\n        totalPrice: ['', [Validators.required, Validators.min(0)]]\r\n      });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n      // Obtener el ID de la propiedad desde la URL\r\n      this.propertyId = this.route.snapshot.paramMap.get('id') || '';\r\n    }\r\n\r\n    // Método para realizar la reserva\r\n    onSubmit(): void {\r\n      if (this.bookingForm.valid) {\r\n        // Obtener las fechas como cadenas en formato YYYY-MM-DD\r\n        const startDate = this.bookingForm.value.startDate;\r\n        const endDate = this.bookingForm.value.endDate;\r\n    \r\n        // Validar que las fechas no sean inválidas\r\n        if (!startDate || !endDate) {\r\n          console.error('Las fechas de inicio o fin son inválidas');\r\n          return;\r\n        }\r\n    \r\n        //aqui establecmos un precio pr defecto para proba\r\n        const totalPrice = this.bookingForm.value.totalPrice || 56437;\r\n    \r\n        // Obtener el user_id del localStorage (asegúrate que el usuario esté autenticado)\r\n        const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n        const userId = currentUser?.user_id;\r\n    \r\n        // Validar que se obtuvo el user_id\r\n        if (!userId) {\r\n          console.error('No se pudo obtener el user_id del usuario');\r\n          return;\r\n        }\r\n\r\n        // Preparar los datos de la reserva, asegurándose de que las fechas estén en formato correcto\r\n        const bookingData = {\r\n          listing_id: parseInt(this.bookingForm.value.listingId, 10),\r\n          user_id: userId,  \r\n          start_date: startDate,  \r\n          end_date: endDate,  \r\n          total_price: totalPrice\r\n        };\r\n    \r\n        // Llamar al servicio para realizar la reserva\r\n        this.bookingService.realizarReserva(bookingData).subscribe(response => {\r\n          console.log('Reserva realizada con éxito', response);\r\n          this.router.navigate(['/property-list']);  \r\n        }, error => {\r\n          console.error('Error al realizar la reserva', error);\r\n          if (error.error && error.error.message) {\r\n            console.error('Errores específicos:', error.error.message);\r\n          }\r\n        });\r\n      } else {\r\n        console.error('Formulario inválido');\r\n      }\r\n    }\r\n\r\n    // Método para cancelar una reserva\r\n    cancelarReserva(bookingId: number): void {\r\n      this.bookingService.cancelarReserva(bookingId).subscribe(response => {\r\n        console.log('Reserva cancelada', response);\r\n        \r\n      }, error => {\r\n        console.error('Error al cancelar la reserva', error);\r\n      });\r\n    }\r\n  submitget(){\r\n    this.bookingService.obtenerReservasBuyer(this.actualuser!.user_id).subscribe(response => {\r\n      console.log('Reserva cancelada', response);\r\n      this.booking.push(response)\r\n      \r\n    }, error => {\r\n      console.error('Error al cancelar la reserva', error);\r\n    });\r\n}\r\nprint(reu:any){\r\n  console.log(reu);\r\n  \r\n}\r\n  ObtenerReserva(bookingId: string): void {\r\n      console.log(\"w\");\r\n\r\n    }\r\n  }\r\n","<main class=\"todo\">\r\n  <button class=\"btn-primary\" (click)=\"submitget()\">Mis reservas</button>\r\n\r\n  <form [formGroup]=\"bookingForm\" (ngSubmit)=\"onSubmit()\">\r\n    <div class=\"form-container\">\r\n      <label for=\"listingId\">ID de la propiedad:</label>\r\n      <input\r\n        type=\"number\"\r\n        id=\"listingId\"\r\n        formControlName=\"listingId\"\r\n        required\r\n        [class.invalid]=\"!bookingForm.get('listingId')?.valid && bookingForm.get('listingId')?.touched\"\r\n      />\r\n      <div *ngIf=\"!bookingForm.get('listingId')?.valid && bookingForm.get('listingId')?.touched\" class=\"error-message\">\r\n        <small *ngIf=\"bookingForm.get('listingId')?.hasError('required')\">El ID de la propiedad es obligatorio.</small>\r\n      </div>\r\n\r\n      <label for=\"startDate\">Fecha de inicio:</label>\r\n      <input\r\n        type=\"date\"\r\n        id=\"startDate\"\r\n        formControlName=\"startDate\"\r\n        required\r\n        [class.invalid]=\"!bookingForm.get('startDate')?.valid && bookingForm.get('startDate')?.touched\"\r\n      />\r\n      <div *ngIf=\"!bookingForm.get('startDate')?.valid && bookingForm.get('startDate')?.touched\" class=\"error-message\">\r\n        <small *ngIf=\"bookingForm.get('startDate')?.hasError('required')\">La fecha de inicio es obligatoria.</small>\r\n      </div>\r\n\r\n      <label for=\"endDate\">Fecha de fin:</label>\r\n      <input\r\n        type=\"date\"\r\n        id=\"endDate\"\r\n        formControlName=\"endDate\"\r\n        required\r\n        [class.invalid]=\"!bookingForm.get('endDate')?.valid && bookingForm.get('endDate')?.touched\"\r\n      />\r\n      <div *ngIf=\"!bookingForm.get('endDate')?.valid && bookingForm.get('endDate')?.touched\" class=\"error-message\">\r\n        <small *ngIf=\"bookingForm.get('endDate')?.hasError('required')\">La fecha de fin es obligatoria.</small>\r\n      </div>\r\n\r\n      <label for=\"totalPrice\">Precio total:</label>\r\n      <input\r\n        type=\"number\"\r\n        id=\"totalPrice\"\r\n        formControlName=\"totalPrice\"\r\n        required\r\n        [class.invalid]=\"!bookingForm.get('totalPrice')?.valid && bookingForm.get('totalPrice')?.touched\"\r\n      />\r\n      <div *ngIf=\"!bookingForm.get('totalPrice')?.valid && bookingForm.get('totalPrice')?.touched\" class=\"error-message\">\r\n        <small *ngIf=\"bookingForm.get('totalPrice')?.hasError('required')\">El precio total es obligatorio.</small>\r\n      </div>\r\n\r\n      <button type=\"submit\" [disabled]=\"!bookingForm.valid\" class=\"btn btn-primary\">Realizar reserva</button>\r\n\r\n      <div class=\"regresar\">\r\n        <p><a routerLink=\"/home\">Regresar</a></p>\r\n      </div>\r\n    </div>\r\n  </form>\r\n\r\n  <div class=\"reservations-container\">\r\n    <label for=\"listingId\">ID de la propiedad:</label>\r\n    @for (book of booking[0]; track $index) {\r\n    <div *ngIf=\"book.canceled == null\" class=\"reservation-item\">\r\n      <button class=\"reservation-actions\" (click)=\"cancelarReserva(book.booking_id)\">Eliminar</button>\r\n      <h2 class=\"reservation-details\">{{\"Reserva \" + book.booking_id}}</h2>\r\n      <label class=\"reservation-details\">{{book.created_at}}</label>\r\n      <label class=\"reservation-details\">{{book.start_date}}</label>\r\n      <label class=\"reservation-details\">{{book.total_price}}</label>\r\n      <label class=\"reservation-details\">{{book.end_date}}</label>\r\n      <label class=\"reservation-details\">{{book.created_at}}</label>\r\n    </div>\r\n    }\r\n  </div>\r\n</main>\r\n"],"mappings":"AACE,SAAiCA,UAAU,EAAEC,mBAAmB,QAAQ,gBAAgB;AAExF,SAAiCC,UAAU,QAAQ,iBAAiB;AACpE,SAASC,YAAY,QAAQ,iBAAiB;;;;;;;;ICUxCC,EAAA,CAAAC,cAAA,YAAkE;IAAAD,EAAA,CAAAE,MAAA,4CAAqC;IAAAF,EAAA,CAAAG,YAAA,EAAQ;;;;;IADjHH,EAAA,CAAAC,cAAA,cAAiH;IAC/GD,EAAA,CAAAI,UAAA,IAAAC,uCAAA,oBAAkE;IACpEL,EAAA,CAAAG,YAAA,EAAM;;;;;IADIH,EAAA,CAAAM,SAAA,EAAwD;IAAxDN,EAAA,CAAAO,UAAA,UAAAC,OAAA,GAAAC,MAAA,CAAAC,WAAA,CAAAC,GAAA,gCAAAH,OAAA,CAAAI,QAAA,aAAwD;;;;;IAYhEZ,EAAA,CAAAC,cAAA,YAAkE;IAAAD,EAAA,CAAAE,MAAA,yCAAkC;IAAAF,EAAA,CAAAG,YAAA,EAAQ;;;;;IAD9GH,EAAA,CAAAC,cAAA,cAAiH;IAC/GD,EAAA,CAAAI,UAAA,IAAAS,wCAAA,oBAAkE;IACpEb,EAAA,CAAAG,YAAA,EAAM;;;;;IADIH,EAAA,CAAAM,SAAA,EAAwD;IAAxDN,EAAA,CAAAO,UAAA,UAAAC,OAAA,GAAAC,MAAA,CAAAC,WAAA,CAAAC,GAAA,gCAAAH,OAAA,CAAAI,QAAA,aAAwD;;;;;IAYhEZ,EAAA,CAAAC,cAAA,YAAgE;IAAAD,EAAA,CAAAE,MAAA,sCAA+B;IAAAF,EAAA,CAAAG,YAAA,EAAQ;;;;;IADzGH,EAAA,CAAAC,cAAA,cAA6G;IAC3GD,EAAA,CAAAI,UAAA,IAAAU,wCAAA,oBAAgE;IAClEd,EAAA,CAAAG,YAAA,EAAM;;;;;IADIH,EAAA,CAAAM,SAAA,EAAsD;IAAtDN,EAAA,CAAAO,UAAA,UAAAC,OAAA,GAAAC,MAAA,CAAAC,WAAA,CAAAC,GAAA,8BAAAH,OAAA,CAAAI,QAAA,aAAsD;;;;;IAY9DZ,EAAA,CAAAC,cAAA,YAAmE;IAAAD,EAAA,CAAAE,MAAA,sCAA+B;IAAAF,EAAA,CAAAG,YAAA,EAAQ;;;;;IAD5GH,EAAA,CAAAC,cAAA,cAAmH;IACjHD,EAAA,CAAAI,UAAA,IAAAW,wCAAA,oBAAmE;IACrEf,EAAA,CAAAG,YAAA,EAAM;;;;;IADIH,EAAA,CAAAM,SAAA,EAAyD;IAAzDN,EAAA,CAAAO,UAAA,UAAAC,OAAA,GAAAC,MAAA,CAAAC,WAAA,CAAAC,GAAA,iCAAAH,OAAA,CAAAI,QAAA,aAAyD;;;;;;IAenEZ,EADF,CAAAC,cAAA,cAA4D,iBACqB;IAA3CD,EAAA,CAAAgB,UAAA,mBAAAC,+DAAA;MAAAjB,EAAA,CAAAkB,aAAA,CAAAC,GAAA;MAAA,MAAAC,OAAA,GAAApB,EAAA,CAAAqB,aAAA,GAAAC,SAAA;MAAA,MAAAb,MAAA,GAAAT,EAAA,CAAAqB,aAAA;MAAA,OAAArB,EAAA,CAAAuB,WAAA,CAASd,MAAA,CAAAe,eAAA,CAAAJ,OAAA,CAAAK,UAAA,CAAgC;IAAA,EAAC;IAACzB,EAAA,CAAAE,MAAA,eAAQ;IAAAF,EAAA,CAAAG,YAAA,EAAS;IAChGH,EAAA,CAAAC,cAAA,aAAgC;IAAAD,EAAA,CAAAE,MAAA,GAAgC;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACrEH,EAAA,CAAAC,cAAA,gBAAmC;IAAAD,EAAA,CAAAE,MAAA,GAAmB;IAAAF,EAAA,CAAAG,YAAA,EAAQ;IAC9DH,EAAA,CAAAC,cAAA,gBAAmC;IAAAD,EAAA,CAAAE,MAAA,GAAmB;IAAAF,EAAA,CAAAG,YAAA,EAAQ;IAC9DH,EAAA,CAAAC,cAAA,gBAAmC;IAAAD,EAAA,CAAAE,MAAA,IAAoB;IAAAF,EAAA,CAAAG,YAAA,EAAQ;IAC/DH,EAAA,CAAAC,cAAA,iBAAmC;IAAAD,EAAA,CAAAE,MAAA,IAAiB;IAAAF,EAAA,CAAAG,YAAA,EAAQ;IAC5DH,EAAA,CAAAC,cAAA,iBAAmC;IAAAD,EAAA,CAAAE,MAAA,IAAmB;IACxDF,EADwD,CAAAG,YAAA,EAAQ,EAC1D;;;;IAN4BH,EAAA,CAAAM,SAAA,GAAgC;IAAhCN,EAAA,CAAA0B,iBAAA,cAAAN,OAAA,CAAAK,UAAA,CAAgC;IAC7BzB,EAAA,CAAAM,SAAA,GAAmB;IAAnBN,EAAA,CAAA0B,iBAAA,CAAAN,OAAA,CAAAO,UAAA,CAAmB;IACnB3B,EAAA,CAAAM,SAAA,GAAmB;IAAnBN,EAAA,CAAA0B,iBAAA,CAAAN,OAAA,CAAAQ,UAAA,CAAmB;IACnB5B,EAAA,CAAAM,SAAA,GAAoB;IAApBN,EAAA,CAAA0B,iBAAA,CAAAN,OAAA,CAAAS,WAAA,CAAoB;IACpB7B,EAAA,CAAAM,SAAA,GAAiB;IAAjBN,EAAA,CAAA0B,iBAAA,CAAAN,OAAA,CAAAU,QAAA,CAAiB;IACjB9B,EAAA,CAAAM,SAAA,GAAmB;IAAnBN,EAAA,CAAA0B,iBAAA,CAAAN,OAAA,CAAAO,UAAA,CAAmB;;;;;IAPxD3B,EAAA,CAAAI,UAAA,IAAA2B,sCAAA,mBAA4D;;;;IAAtD/B,EAAA,CAAAO,UAAA,SAAAa,OAAA,CAAAY,QAAA,SAA2B;;;AD/BnC,WAAaC,gBAAgB;EAAvB,MAAOA,gBAAgB;IAQjBC,EAAA;IACAC,cAAA;IACAC,KAAA;IACAC,MAAA;IAVVC,OAAO,GAAK,EAAE;IACdC,UAAU,GAAaC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAE,CAAC;IAEhEjC,WAAW;IACXkC,UAAU,GAAW,EAAE;IAEvBC,YACUX,EAAe,EACfC,cAA8B,EAC9BC,KAAqB,EACrBC,MAAc;MAHd,KAAAH,EAAE,GAAFA,EAAE;MACF,KAAAC,cAAc,GAAdA,cAAc;MACd,KAAAC,KAAK,GAALA,KAAK;MACL,KAAAC,MAAM,GAANA,MAAM;MAEd;MACA,IAAI,CAAC3B,WAAW,GAAG,IAAI,CAACwB,EAAE,CAACY,KAAK,CAAC;QAC/BC,SAAS,EAAE,CAAC,EAAE,EAAE,CAACnD,UAAU,CAACoD,QAAQ,EAAEpD,UAAU,CAACqD,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QACnEC,SAAS,EAAE,CAAC,EAAE,EAAEtD,UAAU,CAACoD,QAAQ,CAAC;QACpCG,OAAO,EAAE,CAAC,EAAE,EAAEvD,UAAU,CAACoD,QAAQ,CAAC;QAClCI,UAAU,EAAE,CAAC,EAAE,EAAE,CAACxD,UAAU,CAACoD,QAAQ,EAAEpD,UAAU,CAACyD,GAAG,CAAC,CAAC,CAAC,CAAC;OAC1D,CAAC;IACJ;IAEAC,QAAQA,CAAA;MACN;MACA,IAAI,CAACV,UAAU,GAAG,IAAI,CAACR,KAAK,CAACmB,QAAQ,CAACC,QAAQ,CAAC7C,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE;IAChE;IAEA;IACA8C,QAAQA,CAAA;MACN,IAAI,IAAI,CAAC/C,WAAW,CAACgD,KAAK,EAAE;QAC1B;QACA,MAAMR,SAAS,GAAG,IAAI,CAACxC,WAAW,CAACiD,KAAK,CAACT,SAAS;QAClD,MAAMC,OAAO,GAAG,IAAI,CAACzC,WAAW,CAACiD,KAAK,CAACR,OAAO;QAE9C;QACA,IAAI,CAACD,SAAS,IAAI,CAACC,OAAO,EAAE;UAC1BS,OAAO,CAACC,KAAK,CAAC,0CAA0C,CAAC;UACzD;QACF;QAEA;QACA,MAAMT,UAAU,GAAG,IAAI,CAAC1C,WAAW,CAACiD,KAAK,CAACP,UAAU,IAAI,KAAK;QAE7D;QACA,MAAMU,WAAW,GAAGtB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;QACpE,MAAMoB,MAAM,GAAGD,WAAW,EAAEE,OAAO;QAEnC;QACA,IAAI,CAACD,MAAM,EAAE;UACXH,OAAO,CAACC,KAAK,CAAC,2CAA2C,CAAC;UAC1D;QACF;QAEA;QACA,MAAMI,WAAW,GAAG;UAClBC,UAAU,EAAEC,QAAQ,CAAC,IAAI,CAACzD,WAAW,CAACiD,KAAK,CAACZ,SAAS,EAAE,EAAE,CAAC;UAC1DiB,OAAO,EAAED,MAAM;UACfnC,UAAU,EAAEsB,SAAS;UACrBpB,QAAQ,EAAEqB,OAAO;UACjBtB,WAAW,EAAEuB;SACd;QAED;QACA,IAAI,CAACjB,cAAc,CAACiC,eAAe,CAACH,WAAW,CAAC,CAACI,SAAS,CAACC,QAAQ,IAAG;UACpEV,OAAO,CAACW,GAAG,CAAC,6BAA6B,EAAED,QAAQ,CAAC;UACpD,IAAI,CAACjC,MAAM,CAACmC,QAAQ,CAAC,CAAC,gBAAgB,CAAC,CAAC;QAC1C,CAAC,EAAEX,KAAK,IAAG;UACTD,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;UACpD,IAAIA,KAAK,CAACA,KAAK,IAAIA,KAAK,CAACA,KAAK,CAACY,OAAO,EAAE;YACtCb,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAACA,KAAK,CAACY,OAAO,CAAC;UAC5D;QACF,CAAC,CAAC;MACJ,CAAC,MAAM;QACLb,OAAO,CAACC,KAAK,CAAC,qBAAqB,CAAC;MACtC;IACF;IAEA;IACArC,eAAeA,CAACkD,SAAiB;MAC/B,IAAI,CAACvC,cAAc,CAACX,eAAe,CAACkD,SAAS,CAAC,CAACL,SAAS,CAACC,QAAQ,IAAG;QAClEV,OAAO,CAACW,GAAG,CAAC,mBAAmB,EAAED,QAAQ,CAAC;MAE5C,CAAC,EAAET,KAAK,IAAG;QACTD,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD,CAAC,CAAC;IACJ;IACFc,SAASA,CAAA;MACP,IAAI,CAACxC,cAAc,CAACyC,oBAAoB,CAAC,IAAI,CAACrC,UAAW,CAACyB,OAAO,CAAC,CAACK,SAAS,CAACC,QAAQ,IAAG;QACtFV,OAAO,CAACW,GAAG,CAAC,mBAAmB,EAAED,QAAQ,CAAC;QAC1C,IAAI,CAAChC,OAAO,CAACuC,IAAI,CAACP,QAAQ,CAAC;MAE7B,CAAC,EAAET,KAAK,IAAG;QACTD,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD,CAAC,CAAC;IACN;IACAiB,KAAKA,CAACC,GAAO;MACXnB,OAAO,CAACW,GAAG,CAACQ,GAAG,CAAC;IAElB;IACEC,cAAcA,CAACN,SAAiB;MAC5Bd,OAAO,CAACW,GAAG,CAAC,GAAG,CAAC;IAElB;;uCAtGWtC,gBAAgB,EAAAjC,EAAA,CAAAiF,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAnF,EAAA,CAAAiF,iBAAA,CAAAG,EAAA,CAAAC,cAAA,GAAArF,EAAA,CAAAiF,iBAAA,CAAAK,EAAA,CAAAC,cAAA,GAAAvF,EAAA,CAAAiF,iBAAA,CAAAK,EAAA,CAAAE,MAAA;IAAA;;YAAhBvD,gBAAgB;MAAAwD,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAA3F,EAAA,CAAA4F,mBAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,0BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UChC7BlG,EADF,CAAAC,cAAA,cAAmB,gBACiC;UAAtBD,EAAA,CAAAgB,UAAA,mBAAAoF,kDAAA;YAAA,OAASD,GAAA,CAAAxB,SAAA,EAAW;UAAA,EAAC;UAAC3E,EAAA,CAAAE,MAAA,mBAAY;UAAAF,EAAA,CAAAG,YAAA,EAAS;UAEvEH,EAAA,CAAAC,cAAA,cAAwD;UAAxBD,EAAA,CAAAgB,UAAA,sBAAAqF,mDAAA;YAAA,OAAYF,GAAA,CAAA1C,QAAA,EAAU;UAAA,EAAC;UAEnDzD,EADF,CAAAC,cAAA,aAA4B,eACH;UAAAD,EAAA,CAAAE,MAAA,0BAAmB;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAClDH,EAAA,CAAAsG,SAAA,eAME;UACFtG,EAAA,CAAAI,UAAA,IAAAmG,+BAAA,iBAAiH;UAIjHvG,EAAA,CAAAC,cAAA,eAAuB;UAAAD,EAAA,CAAAE,MAAA,wBAAgB;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAC/CH,EAAA,CAAAsG,SAAA,gBAME;UACFtG,EAAA,CAAAI,UAAA,KAAAoG,gCAAA,iBAAiH;UAIjHxG,EAAA,CAAAC,cAAA,gBAAqB;UAAAD,EAAA,CAAAE,MAAA,qBAAa;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAC1CH,EAAA,CAAAsG,SAAA,iBAME;UACFtG,EAAA,CAAAI,UAAA,KAAAqG,gCAAA,iBAA6G;UAI7GzG,EAAA,CAAAC,cAAA,iBAAwB;UAAAD,EAAA,CAAAE,MAAA,qBAAa;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAC7CH,EAAA,CAAAsG,SAAA,iBAME;UACFtG,EAAA,CAAAI,UAAA,KAAAsG,gCAAA,iBAAmH;UAInH1G,EAAA,CAAAC,cAAA,kBAA8E;UAAAD,EAAA,CAAAE,MAAA,wBAAgB;UAAAF,EAAA,CAAAG,YAAA,EAAS;UAGlGH,EADL,CAAAC,cAAA,eAAsB,SACjB,aAAsB;UAAAD,EAAA,CAAAE,MAAA,gBAAQ;UAGvCF,EAHuC,CAAAG,YAAA,EAAI,EAAI,EACrC,EACF,EACD;UAGLH,EADF,CAAAC,cAAA,eAAoC,gBACX;UAAAD,EAAA,CAAAE,MAAA,2BAAmB;UAAAF,EAAA,CAAAG,YAAA,EAAQ;UAClDH,EAAA,CAAA2G,gBAAA,KAAAC,gCAAA,mBAAA5G,EAAA,CAAA6G,sBAAA,CAUC;UAEL7G,EADE,CAAAG,YAAA,EAAM,EACD;;;;;;;;;;;UAxECH,EAAA,CAAAM,SAAA,GAAyB;UAAzBN,EAAA,CAAAO,UAAA,cAAA4F,GAAA,CAAAzF,WAAA,CAAyB;UAQzBV,EAAA,CAAAM,SAAA,GAA+F;UAA/FN,EAAA,CAAA8G,WAAA,eAAAtG,OAAA,GAAA2F,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAH,OAAA,CAAAkD,KAAA,OAAAlD,OAAA,GAAA2F,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAH,OAAA,CAAAuG,OAAA,EAA+F;UAE3F/G,EAAA,CAAAM,SAAA,EAAmF;UAAnFN,EAAA,CAAAO,UAAA,YAAAyG,OAAA,GAAAb,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAqG,OAAA,CAAAtD,KAAA,OAAAsD,OAAA,GAAAb,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAqG,OAAA,CAAAD,OAAA,EAAmF;UAUvF/G,EAAA,CAAAM,SAAA,GAA+F;UAA/FN,EAAA,CAAA8G,WAAA,eAAAG,OAAA,GAAAd,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAsG,OAAA,CAAAvD,KAAA,OAAAuD,OAAA,GAAAd,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAsG,OAAA,CAAAF,OAAA,EAA+F;UAE3F/G,EAAA,CAAAM,SAAA,EAAmF;UAAnFN,EAAA,CAAAO,UAAA,YAAA2G,OAAA,GAAAf,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAuG,OAAA,CAAAxD,KAAA,OAAAwD,OAAA,GAAAf,GAAA,CAAAzF,WAAA,CAAAC,GAAA,gCAAAuG,OAAA,CAAAH,OAAA,EAAmF;UAUvF/G,EAAA,CAAAM,SAAA,GAA2F;UAA3FN,EAAA,CAAA8G,WAAA,eAAAK,OAAA,GAAAhB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,8BAAAwG,OAAA,CAAAzD,KAAA,OAAAyD,OAAA,GAAAhB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,8BAAAwG,OAAA,CAAAJ,OAAA,EAA2F;UAEvF/G,EAAA,CAAAM,SAAA,EAA+E;UAA/EN,EAAA,CAAAO,UAAA,YAAA6G,OAAA,GAAAjB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,8BAAAyG,OAAA,CAAA1D,KAAA,OAAA0D,OAAA,GAAAjB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,8BAAAyG,OAAA,CAAAL,OAAA,EAA+E;UAUnF/G,EAAA,CAAAM,SAAA,GAAiG;UAAjGN,EAAA,CAAA8G,WAAA,eAAAO,OAAA,GAAAlB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,iCAAA0G,OAAA,CAAA3D,KAAA,OAAA2D,OAAA,GAAAlB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,iCAAA0G,OAAA,CAAAN,OAAA,EAAiG;UAE7F/G,EAAA,CAAAM,SAAA,EAAqF;UAArFN,EAAA,CAAAO,UAAA,YAAA+G,OAAA,GAAAnB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,iCAAA2G,OAAA,CAAA5D,KAAA,OAAA4D,OAAA,GAAAnB,GAAA,CAAAzF,WAAA,CAAAC,GAAA,iCAAA2G,OAAA,CAAAP,OAAA,EAAqF;UAIrE/G,EAAA,CAAAM,SAAA,EAA+B;UAA/BN,EAAA,CAAAO,UAAA,cAAA4F,GAAA,CAAAzF,WAAA,CAAAgD,KAAA,CAA+B;UAUvD1D,EAAA,CAAAM,SAAA,GAUC;UAVDN,EAAA,CAAAuH,UAAA,CAAApB,GAAA,CAAA7D,OAAA,CAAQ,CAAC,EAUR;;;qBD5CSzC,mBAAmB,EAAAqF,EAAA,CAAAsC,aAAA,EAAAtC,EAAA,CAAAuC,oBAAA,EAAAvC,EAAA,CAAAwC,mBAAA,EAAAxC,EAAA,CAAAyC,eAAA,EAAAzC,EAAA,CAAA0C,oBAAA,EAAA1C,EAAA,CAAA2C,iBAAA,EAAA3C,EAAA,CAAA4C,kBAAA,EAAA5C,EAAA,CAAA6C,eAAA,EAAEhI,YAAY,EAAAiI,EAAA,CAAAC,IAAA,EAACnI,UAAU;MAAAoI,MAAA;IAAA;;SAI3CjG,gBAAgB;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}